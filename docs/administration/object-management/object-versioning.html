

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Bucket Versioning &#8212; MinIO Object Storage (AGPLv3)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <script defer="defer" src="../../_static/js/main.js"></script>
    <script defer="defer" src="../../_static/js/instantSearch.js"></script>
    <link rel="canonical" href="https://docs.min.io/community/minio-object-store/administration/object-management/object-versioning.html" />
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MinIO Object Locking" href="object-retention.html" />
    <link rel="prev" title="Object Management" href="../object-management.html" /><meta name="pagename" content="administration/object-management/object-versioning"/>

<!-- Preload fonts and scripts -->
<link rel="preload" href="../../_static/fonts/inter/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://E1CSOK3UC2-dsn.algolia.net" crossorigin />

<!-- Google Tag Manager: docs.min.io -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-56L9FLVL');</script>

<!-- Google Tag Manager: main -->
<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TWQNHTD');
</script>

<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-56860620-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Linkedin -->
<script>
    _linkedin_partner_id = "1153348";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);

    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
</script>

<!-- Leadfeeder -->
<script>
    (function(){
        window.ldfdr = window.ldfdr || {};
        (function(d, s, ss, fs){
        fs = d.getElementsByTagName(s)[0];
        function ce(src){
            var cs  = d.createElement(s);
            cs.src = src;
            setTimeout(function(){fs.parentNode.insertBefore(cs,fs)}, 1);
        }
        ce(ss);
        })(document, 'script', 'https://sc.lfeeder.com/lftracker_v1_DzLR5a5kKJA7BoQ2.js');
    })();
</script>
   
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  


  </head><body><!-- Google Tag Manager: docs.min.io (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56L9FLVL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><header class="header inactive">
   <div class="container">
      <div class="header__inner">
         <a href="https://min.io?jmp=docs-minio-object-store" class="header__logo">
            <svg viewBox="0 0 162.612 24.465">
               <path d="M52.751.414h9.108v23.63h-9.108zM41.711.74l-18.488 9.92a.919.919 0 0 1-.856 0L3.879.74A2.808 2.808 0 0 0 2.558.414h-.023A2.4 2.4 0 0 0 0 2.641v21.376h9.1V13.842a.918.918 0 0 1 1.385-.682l10.361 5.568a3.634 3.634 0 0 0 3.336.028l10.933-5.634a.917.917 0 0 1 1.371.69v10.205h9.1V2.641A2.4 2.4 0 0 0 43.055.414h-.023a2.808 2.808 0 0 0-1.321.326zm65.564-.326h-9.237v10.755a.913.913 0 0 1-1.338.706L72.762.675a2.824 2.824 0 0 0-1.191-.261h-.016a2.4 2.4 0 0 0-2.535 2.227v21.377h9.163V13.275a.914.914 0 0 1 1.337-.707l24.032 11.2a2.813 2.813 0 0 0 1.188.26 2.4 2.4 0 0 0 2.535-2.227zm7.161 23.63V.414h4.191v23.63zm28.856.421c-11.274 0-19.272-4.7-19.272-12.232C124.02 4.741 132.066 0 143.292 0s19.32 4.7 19.32 12.233-7.902 12.232-19.32 12.232zm0-21.333c-8.383 0-14.84 3.217-14.84 9.1 0 5.926 6.457 9.1 14.84 9.1s14.887-3.174 14.887-9.1c0-5.883-6.504-9.1-14.887-9.1z" />
            </svg>
         </a>
         
         <!--
         <div class="header__actions">
            

            <button id="dark-mode-toggle" type="button" class="icon icon--switch"><svg width="21" height="21" viewBox="0 0 48 48" fill="currentColor">
    <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-6.75 3.975-11.45Q13.95 7.85 20.4 6.5q2.05-.4 2.8.7t-.05 3q-.45 1.15-.7 2.35-.25 1.2-.25 2.45 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q1.25 0 2.425-.225 1.175-.225 2.275-.625 2.15-.8 3.2.075 1.05.875.55 2.975-1.35 6.05-6.05 10.025Q30.7 42 24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z" />
</svg><svg width="17" height="17" viewBox="0 0 17 17">
    <path d="M8.5 2.898c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415V.58c0-.167.055-.306.164-.415S8.333 0 8.5 0s.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415s-.248.164-.415.164zm3.96 1.642c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.217-1.236c.116-.116.254-.174.415-.174s.299.058.415.174.174.251.174.406-.058.29-.174.406L13.272 4.54c-.116.116-.251.174-.406.174s-.29-.058-.406-.174zm2.222 4.54c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164S17 8.333 17 8.5s-.055.306-.164.415-.248.164-.415.164h-1.739zM8.5 17c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415v-1.739c0-.167.055-.306.164-.415s.248-.164.415-.164.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415S8.667 17 8.5 17zM3.728 4.54L2.492 3.323c-.116-.116-.174-.254-.174-.415s.058-.299.174-.415.251-.174.406-.174.29.058.406.174L4.54 3.728c.116.116.174.251.174.406s-.058.29-.174.406c-.116.103-.254.155-.415.155s-.293-.052-.396-.155zm9.968 9.968l-1.236-1.236c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406c.103-.103.235-.155.396-.155s.299.052.415.155l1.256 1.217c.116.116.171.254.164.415s-.061.299-.164.415c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM.58 9.08c-.167 0-.306-.055-.415-.164S0 8.667 0 8.5s.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164s.164.248.164.415-.055.306-.164.415-.248.164-.415.164H.58zm1.912 5.428c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.236-1.236c.103-.103.235-.155.396-.155s.299.052.415.155c.116.116.174.254.174.415s-.058.299-.174.415l-1.217 1.217c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM8.5 13.136a4.47 4.47 0 0 1-3.284-1.352A4.47 4.47 0 0 1 3.864 8.5a4.47 4.47 0 0 1 1.352-3.284A4.47 4.47 0 0 1 8.5 3.864a4.47 4.47 0 0 1 3.284 1.352A4.47 4.47 0 0 1 13.136 8.5a4.47 4.47 0 0 1-1.352 3.284A4.47 4.47 0 0 1 8.5 13.136zm0-1.159a3.35 3.35 0 0 0 2.463-1.014A3.35 3.35 0 0 0 11.977 8.5a3.35 3.35 0 0 0-1.014-2.463A3.35 3.35 0 0 0 8.5 5.023a3.35 3.35 0 0 0-2.463 1.014A3.35 3.35 0 0 0 5.023 8.5a3.35 3.35 0 0 0 1.014 2.463A3.35 3.35 0 0 0 8.5 11.977z" fill="currentColor" />
</svg>
               Dark Mode
            </button>
         </div>
         -->
      </div>
  
      <h2 class="header__title hidden-rm">Documentation</h2>

      

      <!--<div class="platform-nav">
    <div class="platform-nav__main">
        <div class="container">
        </div>
        <button type="button" class="icon search-toggle search-toggle--keyboard visible-rm"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg>
            Search
        </button>
    </div>
</div> -->
         <div id="search">
            <div class="search__inner">
               <div id="search-box"></div>
               
               <div class="search__dropdown">
                  <div id="search-filters"></div>
                  <div id="search-clear"></div>
                  <div id="search-results"></div>
                  <div id="search-powered-by"></div>
               </div>
            </div>
         </div>
   </div>
 </header>
   <section class="content">
      <div class="container">
         <div class="sidebar inactive scrollbar">
            <div class="hide-aside visible-rm">
               <button type="button" class="icon"><svg width="12" height="12">
    <path d="M11.253 1.691L10.125.563 5.653 5.035 1.181.563.053 1.691l4.472 4.472-4.472 4.472 1.128 1.128 4.472-4.472 4.472 4.472 1.128-1.128-4.472-4.472z" fill-rule="evenodd"/>
</svg>
                     Close Doc Navigation
               </button>
            </div>

            <a class="sidebar__title" href="../../index.html">MinIO Object Storage</a>
            
            
      <nav
         class="docs"
         role="navigation"
      >
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../operations/deployments/installation.html">Installation and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/replication/multi-site-replication.html">Site Replication Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/concepts.html">Core Operational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/monitoring.html">Monitoring and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/external-iam.html">External Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/server-side-encryption.html">Data Encryption (SSE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/network-encryption.html">Network Encryption (TLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/checklists.html">Deployment Checklists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/data-recovery.html">Recover after Hardware Failure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../minio-console.html">MinIO Console</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../object-management.html">Object Management</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bucket Versioning</a></li>
<li class="toctree-l2"><a class="reference internal" href="object-retention.html">MinIO Object Locking</a></li>
<li class="toctree-l2"><a class="reference internal" href="object-delete.html">Object Deletion</a></li>
<li class="toctree-l2"><a class="reference internal" href="object-lifecycle-management.html">Object Lifecycle Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="data-compression.html">Data Compression</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring Bucket and Object Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../identity-access-management.html">Identity and Access Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-side-encryption.html">Server-Side Encryption of Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bucket-replication.html">Bucket Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch-framework.html">Batch Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Core Administration Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/minio-drivers.html">Software Development Kits (SDK)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/security-token-service.html">Security Token Service (STS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/transforms-with-object-lambda.html">Transforms with Object Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/file-transfer-protocol.html">File Transfer Protocol (FTP/SFTP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/kubernetes.html">Kubernetes Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/baremetal.html">Baremetal Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/s3-api-compatibility.html">S3 API Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations/integrations.html">Integrations</a></li>
</ul>

      </nav>
         </div><div class="content__toc scrollbar scrollbar--hover">
  	<button data-aside-toggle="doc" class="icon" type="button"><svg width="17" height="13" viewbox="0 0 17 13">
    <path d="M16.034 0H.966C.433 0 0 .346 0 .773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773S16.567 0 16.034 0zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773z" />
</svg> TOC Menu
  	</button>

  	<div id="content-toc"></div>
		<button class="icon search-toggle" type="button"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg> Search
		</button>
</div>

         <div class="content__main">
            <div class="content__body">
               
  <section id="bucket-versioning">
<span id="minio-bucket-versioning"></span><h1>Bucket Versioning<a class="headerlink" href="#bucket-versioning" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#read-operations-on-versioned-objects" id="id2">Read Operations on Versioned Objects</a></p></li>
<li><p><a class="reference internal" href="#versioning-is-per-namespace" id="id3">Versioning is Per-Namespace</a></p></li>
<li><p><a class="reference internal" href="#versioning-and-storage-capacity" id="id4">Versioning and Storage Capacity</a></p></li>
<li><p><a class="reference internal" href="#version-id-generation" id="id5">Version ID Generation</a></p></li>
<li><p><a class="reference internal" href="#versioned-delete-operations" id="id6">Versioned Delete Operations</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#tutorials" id="id7">Tutorials</a></p>
<ul>
<li><p><a class="reference internal" href="#enable-bucket-versioning" id="id8">Enable Bucket Versioning</a></p></li>
<li><p><a class="reference internal" href="#exclude-a-prefix-from-versioning" id="id9">Exclude a Prefix From Versioning</a></p></li>
<li><p><a class="reference internal" href="#exclude-folders-from-versioning" id="id10">Exclude Folders from Versioning</a></p></li>
<li><p><a class="reference internal" href="#suspend-bucket-versioning" id="id11">Suspend Bucket Versioning</a></p></li>
</ul>
</li>
</ul>
</nav>
<div class="extlinks-video docutils container">
<ul class="simple">
<li><p><a class="reference external" href="https://youtu.be/XGOiwV6Cbuk?ref=docs">Versioning overview</a></p></li>
<li><p><a class="reference external" href="https://youtu.be/nFUI2N5zH34?ref=docs">Versioning lab</a></p></li>
</ul>
</div>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>MinIO supports keeping multiple “versions” of an object in a single bucket.</p>
<p>When enabled, versioning allows MinIO to keep multiple iterations of the same object.
Write operations which would normally overwrite an existing object instead result in the creation of a new versioned object.
MinIO versioning protects from unintended overwrites and deletions while providing support for “undoing” a write operation.
Bucket versioning is a prerequisite for configuring <a class="reference internal" href="object-retention.html#minio-object-locking"><span class="std std-ref">object locking and retention rules</span></a>.</p>
<p>For versioned buckets, a write operation results in a new version of that object with a unique version ID.
MinIO marks the “latest” version of the object that clients retrieve by default.
Clients can then explicitly choose to list, retrieve, or remove a specific object version.</p>
<p>Define <a class="reference internal" href="create-lifecycle-management-expiration-rule.html#minio-lifecycle-management-create-expiry-rule"><span class="std std-ref">object expiration</span></a> rules to remove versions of objects no longer needed, such as by the number of versions or the date of versions.</p>
<section id="read-operations-on-versioned-objects">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">Read Operations on Versioned Objects</a><a class="headerlink" href="#read-operations-on-versioned-objects" title="Permalink to this heading"></a></h3>
<p>Review each of the four images in this series to see how MinIO retrieves objects in a versioned bucket.
Use the arrows on either side of the images to navigate from one to the next.</p>
<div class="sd-sphinx-override sd-cards-carousel sd-card-cols-1 docutils">
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Object with Single Version</div>
<a class=""
               data-lightbox="group-40302ee0-11f4-4f20-b45e-88cf4f4d0a44"
               href="../../_images/minio-versioning-single-version1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-single-version1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Object with single version"/>
                </a><p class="sd-card-text">MinIO adds a unique version ID to each object as part of write operations.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Object with Multiple Versions</div>
<a class=""
               data-lightbox="group-83fba8f3-ddfd-44e2-bae7-d709710f7293"
               href="../../_images/minio-versioning-multiple-versions1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-multiple-versions1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Object with Multiple Versions"/>
                </a><p class="sd-card-text">MinIO retains all versions of an object and marks the most recent
version as the “latest”.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Retrieving the Latest Object Version</div>
<a class=""
               data-lightbox="group-d327f845-0dab-4621-8243-119379ad34e0"
               href="../../_images/minio-versioning-retrieve-latest-version1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-retrieve-latest-version1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Object with Multiple Versions"/>
                </a><p class="sd-card-text">A read operation request without a version ID returns the latest version of the object.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Retrieving a Specific Object Version</div>
<a class=""
               data-lightbox="group-6be85e19-1358-4cd8-80af-29fae947e806"
               href="../../_images/minio-versioning-retrieve-single-version1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-retrieve-single-version1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Object with Multiple Versions"/>
                </a><p class="sd-card-text">Include the version ID to retrieve a specific version of an object during a read operation.</p>
</div>
</div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version MinIO: </span>Server RELEASE.2023-05-04T21-44-30Z</p>
<p>MinIO does not create versions for creation, mutation, or deletion of explicit directory objects (“prefixes”).
Objects created within that explicit directory object retain normal versioning behavior.</p>
</div>
<p>MinIO implicitly determines prefixes from object paths.
Explicit prefix creation typically only occurs with Spark and similar workloads which apply legacy POSIX/HDFS directory creation behavior within the S3 context.</p>
</section>
<section id="versioning-is-per-namespace">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">Versioning is Per-Namespace</a><a class="headerlink" href="#versioning-is-per-namespace" title="Permalink to this heading"></a></h3>
<p>MinIO uses the full namespace (the bucket and path to an object) for each object
as part of determining object uniqueness. For example, all of the following
namespaces are “unique” objects, where mutations of each object result in
the creation of new object versions <em>at that namespace</em>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>databucket/object.blob
databucket/blobs/object.blob
blobbucket/object.blob
blobbucket/blobs/object.blob
</pre></div>
</div>
<p>While <code class="docutils literal notranslate"><span class="pre">object.blob</span></code> might be the same binary across all namespaces,
MinIO only enforces versioning with a specific namespace and therefore
considers each <code class="docutils literal notranslate"><span class="pre">object.blob</span></code> above as distinct and unique.</p>
</section>
<section id="versioning-and-storage-capacity">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Versioning and Storage Capacity</a><a class="headerlink" href="#versioning-and-storage-capacity" title="Permalink to this heading"></a></h3>
<p>MinIO does not perform incremental or differential-type versioning. For
mutation-heavy workloads, this may result in substantial drive usage by
older or aged object versions.</p>
<p>For example, consider a 1GB object containing log data. An application
appends 100MB of data to the log and uploads to MinIO. MinIO would then contain
both the 1GB and 1.1GB versions of the object. If the application repeated
this process every day for 10 days, the bucket would eventually contain more
than 14GB of data associated to a single object.</p>
<p>MinIO supports configuring configuring <a class="reference internal" href="object-lifecycle-management.html#minio-lifecycle-management"><span class="std std-ref">object lifecycle management rules</span></a> to automatically expire or transition aged
object versions and free up storage capacity. For example, you can configure
a rule to automatically expire object versions 90 days after they become
non-current (i.e. no longer the “latest” version of that object). See
<a class="reference internal" href="object-lifecycle-management.html#minio-lifecycle-management-expiration"><span class="std std-ref">MinIO Object Expiration</span></a> for
more information.</p>
<p>You can alternatively perform manual removal of object versions using the
following commands:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/minio-mc/mc-rm.html#mc.rm.-versions" title="mc.rm.--versions"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">rm</span> <span class="pre">--versions</span></code></a> - Removes all versions of an object.</p></li>
<li><dl class="simple">
<dt><a class="reference internal" href="../../reference/minio-mc/mc-rm.html#mc.rm.-older-than" title="mc.rm.--older-than"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">rm</span> <span class="pre">--versions</span> <span class="pre">--older-than</span></code></a> -</dt><dd><p>Removes all versions of an object older than the specified calendar date.</p>
</dd>
</dl>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version RELEASE.2024-04-18T19-09-19Z: </span>MinIO emits a warning if the cumulative size of versions for any single object exceeds 1TiB.</p>
</div>
</section>
<section id="version-id-generation">
<span id="minio-bucket-versioning-id"></span><h3><a class="toc-backref" href="#id5" role="doc-backlink">Version ID Generation</a><a class="headerlink" href="#version-id-generation" title="Permalink to this heading"></a></h3>
<p>MinIO generates a unique and immutable identifier for each versioned object as
part of write operations. Each object version ID consists of a 128-bit
fixed-size <span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc4122.html#section-4.4"><strong>UUIDv4</strong></a>. UUID generation is sufficiently
random to ensure high likelihood of uniqueness for any environment, are
computationally difficult to guess, and do not require centralized registration
process and authority to guarantee uniqueness.</p>
<a class=""
               data-lightbox="group-276f70dd-d825-4908-8ea0-4c30dad34ac2"
               href="../../_images/minio-versioning-multiple-versions1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-multiple-versions1.svg"
                     class="align-center"
                     width="600px"
                     height="auto"
                     alt="Object with Multiple Versions"/>
                </a><p>MinIO does not support client-managed version ID allocation. All version ID
generation is handled by the MinIO server process.</p>
<p>For objects created while versioning is disabled or suspended, MinIO
uses a <code class="docutils literal notranslate"><span class="pre">null</span></code> version ID. You can access or remove these objects by specifying
<code class="docutils literal notranslate"><span class="pre">null</span></code> as the version ID as part of S3 operations.</p>
</section>
<section id="versioned-delete-operations">
<span id="minio-bucket-versioning-delete"></span><h3><a class="toc-backref" href="#id6" role="doc-backlink">Versioned Delete Operations</a><a class="headerlink" href="#versioned-delete-operations" title="Permalink to this heading"></a></h3>
<p>Performing a <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation on a versioned object creates a 0-byte <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code> as the latest version of that object.
For objects where the latest version is a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>, clients must specify versioning flags or identifiers to perform <code class="docutils literal notranslate"><span class="pre">GET/HEAD/LIST/DELETE</span></code> operations on a prior version of that object.
The default server behavior omits <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code> objects from consideration for unversioned operations.</p>
<p>MinIO can utilize <a class="reference internal" href="object-lifecycle-management.html#minio-lifecycle-management-expiration"><span class="std std-ref">Lifecycle Management expiration rules</span></a> to automatically remove versioned objects permanently.
Otherwise, use manual <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operations to permanently remove non-current versioned objects or <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code> objects.</p>
<div class="note admonition">
<p class="admonition-title">MinIO Implements Idempotent Delete Markers</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version RELEASE.2022-08-22T23-53-06Z.</span></p>
</div>
<p>Standard S3 implementations can create multiple sequential delete markers for the same object when processing simple <code class="docutils literal notranslate"><span class="pre">DeleteObject</span></code> requests with no version identifier.
See the S3 docs for details on <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ManagingDelMarkers.html#RemDelMarker">managing delete markers</a>.</p>
<p>MinIO diverges from standard S3 implementation by avoiding this potential duplication of delete markers.
When processing a <code class="docutils literal notranslate"><span class="pre">Delete</span></code> request with no version identifier, MinIO creates at most one Delete Marker for the specified object.
MinIO <strong>does not</strong> share S3’s behavior in creating multiple sequential delete markers.</p>
</div>
<p>To permanently delete an object version, perform the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation and
specify the version ID of the object to delete. Versioned delete operations
are <strong>irreversible</strong>.</p>
<div class="sd-sphinx-override sd-cards-carousel sd-card-cols-1 docutils">
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Deleting an Object</div>
<a class=""
               data-lightbox="group-9470d1d8-7634-436d-b01c-095ff2164e54"
               href="../../_images/minio-versioning-delete-object1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-delete-object1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Deleting an Object"/>
                </a><p class="sd-card-text">Performing a <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation on a versioned object produces a
<code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code> for that object.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Reading a Deleted Object</div>
<a class=""
               data-lightbox="group-d345c2d2-9a5d-4090-9558-71ed08b21551"
               href="../../_images/minio-versioning-retrieve-deleted-object1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-retrieve-deleted-object1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Object with Multiple Versions"/>
                </a><p class="sd-card-text">Clients by default retrieve the “latest” object version. MinIO returns
a <code class="docutils literal notranslate"><span class="pre">404</span></code>-like response if the latest version is a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Retrieve Previous Version of Deleted Object</div>
<a class=""
               data-lightbox="group-5fdbd8ab-ba28-4db6-a454-dc59ea67825c"
               href="../../_images/minio-versioning-retrieve-version-before-delete1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-retrieve-version-before-delete1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Retrieve Version of Deleted Object"/>
                </a><p class="sd-card-text">Clients can retrieve any previous version of the object by specifying the
version ID, even if the “Latest” version is a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>.</p>
</div>
</div>
<div class="sd-card sd-sphinx-override sd-mb-3 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Delete a Specific Object Version</div>
<a class=""
               data-lightbox="group-46bad8c1-8b1f-4c76-b394-1453dd52c246"
               href="../../_images/minio-versioning-delete-specific-version1.svg"
               title=""
               data-title=""
               
               ><img src="../../_images/minio-versioning-delete-specific-version1.svg"
                     class="align-center"
                     width="100%"
                     height="auto"
                     alt="Retrieve Version of Deleted Object"/>
                </a><p class="sd-card-text">Clients can delete a specific object version by specifying the version ID
as part of the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> operation. Deleting a specific version is
<strong>permanent</strong> and does not result in the creation of a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>.</p>
</div>
</div>
</div>
<p>The following <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> commands operate on <code class="docutils literal notranslate"><span class="pre">DeleteMarkers</span></code> or versioned
objects:</p>
<ul class="simple">
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-ls.html#mc.ls.-versions" title="mc.ls.--versions"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">ls</span> <span class="pre">--versions</span></code></a> to view all versions of an object,
including delete markers.</p></li>
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-cp.html#mc.cp.-version-id" title="mc.cp.--version-id"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">cp</span> <span class="pre">--version-id=UUID</span> <span class="pre">...</span></code></a> to
retrieve the version of the “deleted” object with matching <code class="docutils literal notranslate"><span class="pre">UUID</span></code>.</p></li>
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-rm.html#mc.rm.-version-id" title="mc.rm.--version-id"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">rm</span> <span class="pre">--version-id=UUID</span> <span class="pre">...</span></code></a> to delete
the version of the object with matching <code class="docutils literal notranslate"><span class="pre">UUID</span></code>.</p></li>
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-rm.html#mc.rm.-versions" title="mc.rm.--versions"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">rm</span> <span class="pre">--versions</span></code></a> to delete <em>all</em> versions of an object.</p></li>
</ul>
</section>
</section>
<section id="tutorials">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Tutorials</a><a class="headerlink" href="#tutorials" title="Permalink to this heading"></a></h2>
<section id="enable-bucket-versioning">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Enable Bucket Versioning</a><a class="headerlink" href="#enable-bucket-versioning" title="Permalink to this heading"></a></h3>
<p>You can enable versioning using the MinIO Console, the MinIO <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> CLI, or
using an S3-compatible SDK.</p>
<p>Use the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> command to enable versioning on an
existing bucket:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias.html#command-mc.alias" title="mc.alias"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">alias</span></code></a> of a configured
MinIO deployment.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">BUCKET</span></code> with the
<a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.ALIAS" title="mc.version.enable.ALIAS"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">target</span> <span class="pre">bucket</span></code></a> on which to enable
versioning.</p></li>
</ul>
<p>Objects created prior to enabling versioning have a <code class="docutils literal notranslate"><span class="pre">null</span></code> <a class="reference internal" href="#minio-bucket-versioning-id"><span class="std std-ref">version ID</span></a>.</p>
</section>
<section id="exclude-a-prefix-from-versioning">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Exclude a Prefix From Versioning</a><a class="headerlink" href="#exclude-a-prefix-from-versioning" title="Permalink to this heading"></a></h3>
<p>You can exclude certain <a class="reference internal" href="../concepts.html#minio-admin-concepts-organize-objects"><span class="std std-ref">prefixes</span></a> from versioning using the <a class="reference internal" href="../../reference/minio-mc.html#minio-client"><span class="std std-ref">MinIO Client</span></a>.
This is useful for Spark/Hadoop workloads or others that initially create objects with temporary prefixes.</p>
<div class="note admonition">
<p class="admonition-title">Replication and Object Locking Require Versioning</p>
<p>MinIO requires versioning to support <a class="reference internal" href="../../glossary.html#term-replication"><span class="xref std std-term">replication</span></a>.
Objects in excluded prefixes do not replicate to any peer site or remote site.</p>
<p>MinIO does not support excluding prefixes from versioning on buckets with <a class="reference internal" href="object-retention.html#minio-object-locking"><span class="std std-ref">object locking enabled</span></a>.</p>
</div>
<ul>
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> with the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.-excluded-prefixes" title="mc.version.enable.--excluded-prefixes"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">--excluded-prefixes</span></code></a> option:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--excluded-prefixes<span class="w"> </span><span class="s2">&quot;prefix1, prefix2&quot;</span><span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias.html#command-mc.alias" title="mc.alias"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">alias</span></code></a> of a configured MinIO deployment.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">BUCKET</span></code> with the name of the <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket.html">bucket</a> you want to exclude <a class="reference internal" href="../concepts.html#minio-admin-concepts-organize-objects"><span class="std std-ref">prefixes</span></a> for.</p></li>
</ul>
</li>
</ul>
<p>The list of <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.-excluded-prefixes" title="mc.version.enable.--excluded-prefixes"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">--excluded-prefixes</span></code></a> prefixes match all objects containing the specified strings in their prefix or name, similar to a regular expression of the form <code class="docutils literal notranslate"><span class="pre">prefix*</span></code>.
To match objects by prefix only, use <code class="docutils literal notranslate"><span class="pre">prefix/*</span></code>.</p>
<p>For example, the following command excludes any objects containing <code class="docutils literal notranslate"><span class="pre">_test</span></code> or <code class="docutils literal notranslate"><span class="pre">_temp</span></code> in their prefix or name from versioning:</p>
<blockquote>
<div><div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--excluded-prefixes<span class="w"> </span><span class="s2">&quot;_test, _temp&quot;</span><span class="w"> </span>local/my-bucket
</pre></div>
</div>
</div></blockquote>
<p>You can exclude up to 10 prefixes for each bucket.
To add or remove prefixes, repeat the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> command with an updated list.
The new list of prefixes replaces the previous one.</p>
<p>To view the currently excluded prefixes, use <a class="reference internal" href="../../reference/minio-mc/mc-version-info.html#command-mc.version.info" title="mc.version.info"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">info</span></code></a> with the <code class="docutils literal notranslate"><span class="pre">--json</span></code> option:</p>
<blockquote>
<div><div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span>info<span class="w"> </span>ALIAS/BUCKET<span class="w"> </span>--json
</pre></div>
</div>
</div></blockquote>
<p>The command output resembles the following, with the list of excluded prefixes in the <code class="docutils literal notranslate"><span class="pre">ExcludedPrefixes</span></code> property:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mc<span class="w"> </span>version<span class="w"> </span>info<span class="w"> </span>local/my-bucket<span class="w"> </span>--json
<span class="o">{</span>
<span class="w"> </span><span class="s2">&quot;Op&quot;</span>:<span class="w"> </span><span class="s2">&quot;info&quot;</span>,
<span class="w"> </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="s2">&quot;success&quot;</span>,
<span class="w"> </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;local/my-bucket&quot;</span>,
<span class="w"> </span><span class="s2">&quot;versioning&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>,
<span class="w">  </span><span class="s2">&quot;MFADelete&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">  </span><span class="s2">&quot;ExcludedPrefixes&quot;</span>:<span class="w"> </span><span class="o">[</span>
<span class="w">   </span><span class="s2">&quot;prefix1, prefix2&quot;</span>
<span class="w">  </span><span class="o">]</span>
<span class="w"> </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To disable prefix exclusion and resume versioning all prefixes, repeat the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> command without <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.-excluded-prefixes" title="mc.version.enable.--excluded-prefixes"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">--excluded-prefixes</span></code></a>:</p>
<blockquote>
<div><div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
</div></blockquote>
</section>
<section id="exclude-folders-from-versioning">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Exclude Folders from Versioning</a><a class="headerlink" href="#exclude-folders-from-versioning" title="Permalink to this heading"></a></h3>
<p>You can exclude folders from versioning using the <a class="reference internal" href="../../reference/minio-mc.html#minio-client"><span class="std std-ref">MinIO Client</span></a>.</p>
<div class="note admonition">
<p class="admonition-title">Replication and Object Locking Require Versioning</p>
<p>MinIO requires versioning to support <a class="reference internal" href="../../glossary.html#term-replication"><span class="xref std std-term">replication</span></a>.
Objects in excluded folders do not replicate to any peer site or remote site.</p>
<p>MinIO does not support excluding folders from versioning on buckets with <a class="reference internal" href="object-retention.html#minio-object-locking"><span class="std std-ref">object locking enabled</span></a>.</p>
</div>
<div class="note admonition">
<p class="admonition-title">Object locking</p>
<p>Buckets with <a class="reference internal" href="object-retention.html#minio-object-locking"><span class="std std-ref">object locking enabled</span></a> require versioning and do not support excluding folders.</p>
</div>
<ul>
<li><p>Use <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> with the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.-exclude-folders" title="mc.version.enable.--exclude-folders"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">--exclude-folders</span></code></a> option to exclude objects with names ending in <code class="docutils literal notranslate"><span class="pre">/</span></code> from versioning:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--exclude-folders<span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias.html#command-mc.alias" title="mc.alias"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">alias</span></code></a> of a configured MinIO deployment.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">BUCKET</span></code> with the <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingBucket.html">bucket</a> you want to exclude <a class="reference internal" href="../concepts.html#minio-admin-concepts-organize-objects"><span class="std std-ref">folders</span></a> for.</p></li>
</ul>
</li>
</ul>
<p>To check whether folders are versioned for a bucket, use the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> command with the <code class="docutils literal notranslate"><span class="pre">--json</span></code> option.
If the <code class="docutils literal notranslate"><span class="pre">ExcludeFolders</span></code> property is <code class="docutils literal notranslate"><span class="pre">true</span></code>, folders in that bucket are not versioned.</p>
<blockquote>
<div><div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>--excluded-prefixes<span class="w"> </span>ALIAS/BUCKET<span class="w"> </span>--json
</pre></div>
</div>
</div></blockquote>
<p>The command output resembles the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>mc<span class="w"> </span>version<span class="w"> </span>info<span class="w"> </span>local/my-bucket<span class="w"> </span>--json
<span class="o">{</span>
<span class="w"> </span><span class="s2">&quot;Op&quot;</span>:<span class="w"> </span><span class="s2">&quot;info&quot;</span>,
<span class="w"> </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="s2">&quot;success&quot;</span>,
<span class="w"> </span><span class="s2">&quot;url&quot;</span>:<span class="w"> </span><span class="s2">&quot;local/my-bucket&quot;</span>,
<span class="w"> </span><span class="s2">&quot;versioning&quot;</span>:<span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="s2">&quot;status&quot;</span>:<span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>,
<span class="w">  </span><span class="s2">&quot;MFADelete&quot;</span>:<span class="w"> </span><span class="s2">&quot;&quot;</span>,
<span class="w">  </span><span class="s2">&quot;ExcludeFolders&quot;</span>:<span class="w"> </span><span class="nb">true</span>
<span class="w"> </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>To disable folder exclusion and resume versioning all folders, repeat the <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#command-mc.version.enable" title="mc.version.enable"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">enable</span></code></a> command without <a class="reference internal" href="../../reference/minio-mc/mc-version-enable.html#mc.version.enable.-exclude-folders" title="mc.version.enable.--exclude-folders"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">--exclude-folders</span></code></a>:</p>
<blockquote>
<div><div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
</div></blockquote>
</section>
<section id="suspend-bucket-versioning">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Suspend Bucket Versioning</a><a class="headerlink" href="#suspend-bucket-versioning" title="Permalink to this heading"></a></h3>
<p>You can suspend bucket versioning at any time using he MinIO <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> CLI or using an S3-compatible SDK.</p>
<p>Use the <a class="reference internal" href="../../reference/minio-mc/mc-version-suspend.html#command-mc.version.suspend" title="mc.version.suspend"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">version</span> <span class="pre">suspend</span></code></a> command to enable versioning on an existing bucket:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>version<span class="w"> </span><span class="nb">suspend</span><span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias.html#command-mc.alias" title="mc.alias"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">alias</span></code></a> of a configured
MinIO deployment.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">BUCKET</span></code> with the
<a class="reference internal" href="../../reference/minio-mc/mc-mb.html#mc.mb.ALIAS" title="mc.mb.ALIAS"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">target</span> <span class="pre">bucket</span></code></a> on which to disable
versioning.</p></li>
</ul>
<p>Objects created while versioning is suspended are assigned a <code class="docutils literal notranslate"><span class="pre">null</span></code> <a class="reference internal" href="#minio-bucket-versioning-id"><span class="std std-ref">version ID</span></a>.
Any mutations to an object while versioning is suspended result in overwriting that <code class="docutils literal notranslate"><span class="pre">null</span></code> versioned object.
MinIO does not remove or otherwise alter existing versioned objects as part of suspending versioning.
Clients can continue interacting with any existing object versions in the bucket.</p>
</section>
</section>
</section>


            </div><div class="footer">
   This work is licensed under a
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License.</a>
   2020-Present, MinIO, Inc. 
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img height="10" alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
   </a>
</div>
         </div>
      </div>
   </section><div id="cookie">
    <div class="container">
        <div class="cookie__text">
            <strong>Your privacy is important to us:</strong>
            We use cookies in order to give you a better experience. If you wish so, you can always review our 
            <a target="_blank" rel="noreferrer noopener" href="https://min.io/privacy-policy">Privacy Policy</a>.
        </div>

        <button type="button" id="cookie__btn">Accept</button>
    </div>
</div><script>
    // Dark mode and read mode detection

    // Dark mode
    /*var isDarkMode = localStorage.getItem("dark-mode");
    var dmToggleBtn = document.getElementById("dark-mode-toggle");
    if (isDarkMode === "true") {
       document.documentElement.classList.add("dark-mode");
       dmToggleBtn.classList.add("active");
    }

    // Read mode
    var isReadMode = localStorage.getItem("read-mode");
    var rmToggleBtn = document.getElementById("read-mode-toggle");

    if (isReadMode === "true") {
        document.documentElement.classList.add("read-mode");
        rmToggleBtn.classList.add("active");
    }*/
 </script>
  </body>
</html>
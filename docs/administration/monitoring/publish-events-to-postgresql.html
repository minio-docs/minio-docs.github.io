

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Publish Events to PostgreSQL &#8212; MinIO Object Storage (AGPLv3)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <script defer="defer" src="../../_static/js/main.js"></script>
    <script defer="defer" src="../../_static/js/instantSearch.js"></script>
    <link rel="canonical" href="https://docs.min.io/community/minio-object-store/administration/monitoring/publish-events-to-postgresql.html" />
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Publish Events to Redis" href="publish-events-to-redis.html" />
    <link rel="prev" title="Publish Events to MySQL" href="publish-events-to-mysql.html" /><meta name="pagename" content="administration/monitoring/publish-events-to-postgresql"/>

<!-- Preload fonts and scripts -->
<link rel="preload" href="../../_static/fonts/inter/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://E1CSOK3UC2-dsn.algolia.net" crossorigin />

<!-- Google Tag Manager: docs.min.io -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-56L9FLVL');</script>

<!-- Google Tag Manager: main -->
<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TWQNHTD');
</script>

<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-56860620-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Linkedin -->
<script>
    _linkedin_partner_id = "1153348";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);

    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
</script>

<!-- Leadfeeder -->
<script>
    (function(){
        window.ldfdr = window.ldfdr || {};
        (function(d, s, ss, fs){
        fs = d.getElementsByTagName(s)[0];
        function ce(src){
            var cs  = d.createElement(s);
            cs.src = src;
            setTimeout(function(){fs.parentNode.insertBefore(cs,fs)}, 1);
        }
        ce(ss);
        })(document, 'script', 'https://sc.lfeeder.com/lftracker_v1_DzLR5a5kKJA7BoQ2.js');
    })();
</script>
   
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  


  </head><body><!-- Google Tag Manager: docs.min.io (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56L9FLVL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><header class="header inactive">
   <div class="container">
      <div class="header__inner">
         <a href="https://min.io?jmp=docs-minio-object-store" class="header__logo">
            <svg viewBox="0 0 162.612 24.465">
               <path d="M52.751.414h9.108v23.63h-9.108zM41.711.74l-18.488 9.92a.919.919 0 0 1-.856 0L3.879.74A2.808 2.808 0 0 0 2.558.414h-.023A2.4 2.4 0 0 0 0 2.641v21.376h9.1V13.842a.918.918 0 0 1 1.385-.682l10.361 5.568a3.634 3.634 0 0 0 3.336.028l10.933-5.634a.917.917 0 0 1 1.371.69v10.205h9.1V2.641A2.4 2.4 0 0 0 43.055.414h-.023a2.808 2.808 0 0 0-1.321.326zm65.564-.326h-9.237v10.755a.913.913 0 0 1-1.338.706L72.762.675a2.824 2.824 0 0 0-1.191-.261h-.016a2.4 2.4 0 0 0-2.535 2.227v21.377h9.163V13.275a.914.914 0 0 1 1.337-.707l24.032 11.2a2.813 2.813 0 0 0 1.188.26 2.4 2.4 0 0 0 2.535-2.227zm7.161 23.63V.414h4.191v23.63zm28.856.421c-11.274 0-19.272-4.7-19.272-12.232C124.02 4.741 132.066 0 143.292 0s19.32 4.7 19.32 12.233-7.902 12.232-19.32 12.232zm0-21.333c-8.383 0-14.84 3.217-14.84 9.1 0 5.926 6.457 9.1 14.84 9.1s14.887-3.174 14.887-9.1c0-5.883-6.504-9.1-14.887-9.1z" />
            </svg>
         </a>
         
         <!--
         <div class="header__actions">
            

            <button id="dark-mode-toggle" type="button" class="icon icon--switch"><svg width="21" height="21" viewBox="0 0 48 48" fill="currentColor">
    <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-6.75 3.975-11.45Q13.95 7.85 20.4 6.5q2.05-.4 2.8.7t-.05 3q-.45 1.15-.7 2.35-.25 1.2-.25 2.45 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q1.25 0 2.425-.225 1.175-.225 2.275-.625 2.15-.8 3.2.075 1.05.875.55 2.975-1.35 6.05-6.05 10.025Q30.7 42 24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z" />
</svg><svg width="17" height="17" viewBox="0 0 17 17">
    <path d="M8.5 2.898c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415V.58c0-.167.055-.306.164-.415S8.333 0 8.5 0s.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415s-.248.164-.415.164zm3.96 1.642c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.217-1.236c.116-.116.254-.174.415-.174s.299.058.415.174.174.251.174.406-.058.29-.174.406L13.272 4.54c-.116.116-.251.174-.406.174s-.29-.058-.406-.174zm2.222 4.54c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164S17 8.333 17 8.5s-.055.306-.164.415-.248.164-.415.164h-1.739zM8.5 17c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415v-1.739c0-.167.055-.306.164-.415s.248-.164.415-.164.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415S8.667 17 8.5 17zM3.728 4.54L2.492 3.323c-.116-.116-.174-.254-.174-.415s.058-.299.174-.415.251-.174.406-.174.29.058.406.174L4.54 3.728c.116.116.174.251.174.406s-.058.29-.174.406c-.116.103-.254.155-.415.155s-.293-.052-.396-.155zm9.968 9.968l-1.236-1.236c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406c.103-.103.235-.155.396-.155s.299.052.415.155l1.256 1.217c.116.116.171.254.164.415s-.061.299-.164.415c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM.58 9.08c-.167 0-.306-.055-.415-.164S0 8.667 0 8.5s.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164s.164.248.164.415-.055.306-.164.415-.248.164-.415.164H.58zm1.912 5.428c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.236-1.236c.103-.103.235-.155.396-.155s.299.052.415.155c.116.116.174.254.174.415s-.058.299-.174.415l-1.217 1.217c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM8.5 13.136a4.47 4.47 0 0 1-3.284-1.352A4.47 4.47 0 0 1 3.864 8.5a4.47 4.47 0 0 1 1.352-3.284A4.47 4.47 0 0 1 8.5 3.864a4.47 4.47 0 0 1 3.284 1.352A4.47 4.47 0 0 1 13.136 8.5a4.47 4.47 0 0 1-1.352 3.284A4.47 4.47 0 0 1 8.5 13.136zm0-1.159a3.35 3.35 0 0 0 2.463-1.014A3.35 3.35 0 0 0 11.977 8.5a3.35 3.35 0 0 0-1.014-2.463A3.35 3.35 0 0 0 8.5 5.023a3.35 3.35 0 0 0-2.463 1.014A3.35 3.35 0 0 0 5.023 8.5a3.35 3.35 0 0 0 1.014 2.463A3.35 3.35 0 0 0 8.5 11.977z" fill="currentColor" />
</svg>
               Dark Mode
            </button>
         </div>
         -->
      </div>
  
      <h2 class="header__title hidden-rm">Documentation</h2>

      

      <!--<div class="platform-nav">
    <div class="platform-nav__main">
        <div class="container">
        </div>
        <button type="button" class="icon search-toggle search-toggle--keyboard visible-rm"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg>
            Search
        </button>
    </div>
</div> -->
         <div id="search">
            <div class="search__inner">
               <div id="search-box"></div>
               
               <div class="search__dropdown">
                  <div id="search-filters"></div>
                  <div id="search-clear"></div>
                  <div id="search-results"></div>
                  <div id="search-powered-by"></div>
               </div>
            </div>
         </div>
   </div>
 </header>
   <section class="content">
      <div class="container">
         <div class="sidebar inactive scrollbar">
            <div class="hide-aside visible-rm">
               <button type="button" class="icon"><svg width="12" height="12">
    <path d="M11.253 1.691L10.125.563 5.653 5.035 1.181.563.053 1.691l4.472 4.472-4.472 4.472 1.128 1.128 4.472-4.472 4.472 4.472 1.128-1.128-4.472-4.472z" fill-rule="evenodd"/>
</svg>
                     Close Doc Navigation
               </button>
            </div>

            <a class="sidebar__title" href="../../index.html">MinIO Object Storage</a>
            
            
      <nav
         class="docs"
         role="navigation"
      >
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../operations/deployments/installation.html">Installation and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/replication/multi-site-replication.html">Site Replication Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/concepts.html">Core Operational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/monitoring.html">Monitoring and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/external-iam.html">External Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/server-side-encryption.html">Data Encryption (SSE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/network-encryption.html">Network Encryption (TLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/checklists.html">Deployment Checklists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/data-recovery.html">Recover after Hardware Failure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../minio-console.html">MinIO Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-management.html">Object Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../monitoring.html">Monitoring Bucket and Object Events</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="bucket-notifications.html">Bucket notifications</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-amqp.html">Publish Events to AMQP (RabbitMQ)</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-mqtt.html">Publish Events to MQTT</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-nats.html">Publish Events to NATS</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-nsq.html">Publish Events to NSQ</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-elasticsearch.html">Publish Events to Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-kafka.html">Publish Events to Kafka</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-mysql.html">Publish Events to MySQL</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Publish Events to PostgreSQL</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-redis.html">Publish Events to Redis</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish-events-to-webhook.html">Publish Events to Webhook</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../identity-access-management.html">Identity and Access Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-side-encryption.html">Server-Side Encryption of Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bucket-replication.html">Bucket Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../batch-framework.html">Batch Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Core Administration Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/minio-drivers.html">Software Development Kits (SDK)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/security-token-service.html">Security Token Service (STS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/transforms-with-object-lambda.html">Transforms with Object Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/file-transfer-protocol.html">File Transfer Protocol (FTP/SFTP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/kubernetes.html">Kubernetes Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/baremetal.html">Baremetal Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/s3-api-compatibility.html">S3 API Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations/integrations.html">Integrations</a></li>
</ul>

      </nav>
         </div><div class="content__toc scrollbar scrollbar--hover">
  	<button data-aside-toggle="doc" class="icon" type="button"><svg width="17" height="13" viewbox="0 0 17 13">
    <path d="M16.034 0H.966C.433 0 0 .346 0 .773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773S16.567 0 16.034 0zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773z" />
</svg> TOC Menu
  	</button>

  	<div id="content-toc"></div>
		<button class="icon search-toggle" type="button"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg> Search
		</button>
</div>

         <div class="content__main">
            <div class="content__body">
               
  <section id="publish-events-to-postgresql">
<span id="minio-bucket-notifications-publish-postgresql"></span><h1>Publish Events to PostgreSQL<a class="headerlink" href="#publish-events-to-postgresql" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#add-a-postgresql-endpoint-to-a-minio-deployment" id="id5">Add a PostgreSQL Endpoint to a MinIO Deployment</a></p></li>
<li><p><a class="reference internal" href="#update-a-postgresql-endpoint-in-a-minio-deployment" id="id6">Update a PostgreSQL Endpoint in a MinIO Deployment</a></p></li>
</ul>
</nav>
<p>MinIO supports publishing <a class="reference internal" href="bucket-notifications.html#minio-bucket-notifications"><span class="std std-ref">bucket notification</span></a> events to
<a class="reference external" href="https://www.postgresql.org/">PostgreSQL</a>. MinIO supports
PostgreSQL 9.5 and later <em>only</em>.</p>
<section id="add-a-postgresql-endpoint-to-a-minio-deployment">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Add a PostgreSQL Endpoint to a MinIO Deployment</a><a class="headerlink" href="#add-a-postgresql-endpoint-to-a-minio-deployment" title="Permalink to this heading"></a></h2>
<p>The following procedure adds a new PostgreSQL service endpoint for supporting
<a class="reference internal" href="bucket-notifications.html#minio-bucket-notifications"><span class="std std-ref">bucket notifications</span></a> in a MinIO
deployment.</p>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h3>
<section id="postgresql-9-5-and-later">
<h4>PostgreSQL 9.5 and later<a class="headerlink" href="#postgresql-9-5-and-later" title="Permalink to this heading"></a></h4>
<p>MinIO relies on features introduced with PostgreSQL 9.5.</p>
</section>
<section id="minio-mc-command-line-tool">
<h4>MinIO <code class="docutils literal notranslate"><span class="pre">mc</span></code> Command Line Tool<a class="headerlink" href="#minio-mc-command-line-tool" title="Permalink to this heading"></a></h4>
<p>This procedure uses the <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> command line tool for certain actions.
See the <code class="docutils literal notranslate"><span class="pre">mc</span></code> <a class="reference internal" href="../../reference/minio-mc.html#mc-install"><span class="std std-ref">Quickstart</span></a> for installation instructions.</p>
</section>
</section>
<section id="add-the-postgresql-endpoint-to-minio">
<h3>1) Add the PostgreSQL Endpoint to MinIO<a class="headerlink" href="#add-the-postgresql-endpoint-to-minio" title="Permalink to this heading"></a></h3>
<p>You can configure a new PostgreSQL service endpoint using either environment
variables <em>or</em> by setting runtime configuration settings.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-0">
Environment Variables</label><div class="sd-tab-content docutils">
<p>MinIO supports specifying the PostgreSQL service endpoint and associated
configuration settings using
<a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#minio-server-envvar-bucket-notification-postgresql"><span class="std std-ref">environment variables</span></a>. The
<a class="reference internal" href="../../reference/minio-server/minio-server.html#command-minio.server" title="minio.server"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">minio</span> <span class="pre">server</span></code></a> process applies the specified settings on its
next startup.</p>
<p>The following example code sets <em>all</em>  environment variables
related to configuring a PostgreSQL service endpoint. The minimum
<em>required</em> variables are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#envvar.MINIO_NOTIFY_POSTGRES_CONNECTION_STRING" title="envvar.MINIO_NOTIFY_POSTGRES_CONNECTION_STRING"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_NOTIFY_POSTGRES_CONNECTION_STRING</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#envvar.MINIO_NOTIFY_POSTGRES_TABLE" title="envvar.MINIO_NOTIFY_POSTGRES_TABLE"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_NOTIFY_POSTGRES_TABLE</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#envvar.MINIO_NOTIFY_POSTGRES_FORMAT" title="envvar.MINIO_NOTIFY_POSTGRES_FORMAT"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_NOTIFY_POSTGRES_FORMAT</span></code></a></p></li>
</ul>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_ENABLE_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;on&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_CONNECTION_STRING_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;host=postgresql-endpoint.example.net port=4222&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_TABLE_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;minioevents&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_FORMAT_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;namespace|access&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_MAX_OPEN_CONNECTIONS_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;2&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_QUEUE_DIR_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;/opt/minio/events&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_QUEUE_LIMIT_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;100000&quot;</span>
<span class="w">   </span><span class="nb">export</span><span class="w"> </span>MINIO_NOTIFY_POSTGRES_COMMENT_&lt;IDENTIFIER&gt;<span class="o">=</span><span class="s2">&quot;PostgreSQL Notification Event Logging for MinIO&quot;</span>
</pre></div>
</div>
<ul>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> with a unique descriptive string for the
PostgreSQL service endpoint. Use the same <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> value for all
environment variables related to the new target service endpoint.
The following examples assume an identifier of <code class="docutils literal notranslate"><span class="pre">PRIMARY</span></code>.</p>
<p>If the specified <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> matches an existing PostgreSQL service
endpoint on the MinIO deployment, the new settings <em>override</em>
any existing settings for that endpoint. Use
<a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-config.html#mc.admin.config.get" title="mc.admin.config.get"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">config</span> <span class="pre">get</span> <span class="pre">notify_postgres</span></code></a> to
review the currently configured PostgreSQL endpoints on the MinIO deployment.</p>
</li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;ENDPOINT&gt;</span></code> with the <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">PostgreSQL Connection String</a>
for PostgreSQL service endpoint. MinIO supports <code class="docutils literal notranslate"><span class="pre">key=value</span></code> format for
the connection string. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;host=https://postgresql.example.com</span> <span class="pre">port=5432</span> <span class="pre">...&quot;</span></code></p>
<p>For more complete documentation on supported PostgreSQL connection
string parameters, see <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">PostgreSQL Connection String</a>.</p>
</li>
</ul>
<p>See <a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#minio-server-envvar-bucket-notification-postgresql"><span class="std std-ref">PostgreSQL Service for Bucket Notifications</span></a> for complete
documentation on each environment variable.</p>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-1">
Configuration Settings</label><div class="sd-tab-content docutils">
<p>MinIO supports adding or updating PostgreSQL endpoints on a running
<a class="reference internal" href="../../reference/minio-server/minio-server.html#command-minio.server" title="minio.server"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">minio</span> <span class="pre">server</span></code></a> process using the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-config.html#mc.admin.config.set" title="mc.admin.config.set"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">config</span> <span class="pre">set</span></code></a> command
and the <a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres" title="mc-conf.notify_postgres"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span></code></a> configuration key. You must restart the
<a class="reference internal" href="../../reference/minio-server/minio-server.html#command-minio.server" title="minio.server"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">minio</span> <span class="pre">server</span></code></a> process to apply any new or updated configuration
settings.</p>
<p>The following example code sets <em>all</em>  settings related to configuring an
PostgreSQL service endpoint. The minimum <em>required</em> setting are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.connection_string" title="mc-conf.notify_postgres.connection_string"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">connection_string</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.table" title="mc-conf.notify_postgres.table"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">table</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.format" title="mc-conf.notify_postgres.format"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">format</span></code></a></p></li>
</ul>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>ALIAS/<span class="w"> </span>notify_postgres:IDENTIFIER<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">connection_string</span><span class="o">=</span><span class="s2">&quot;ENDPOINT&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">table</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">format</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">max_open_connections</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">queue_dir</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">queue_limit</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">comment</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span>
</pre></div>
</div>
<ul>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code> with a unique descriptive string for the
PostgreSQL service endpoint. The following examples in this procedure
assume an identifier of <code class="docutils literal notranslate"><span class="pre">PRIMARY</span></code>.</p>
<p>If the specified <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code> matches an existing PostgreSQL service
endpoint on the MinIO deployment, the new settings <em>override</em>
any existing settings for that endpoint. Use
<a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-config.html#mc.admin.config.get" title="mc.admin.config.get"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">config</span> <span class="pre">get</span> <span class="pre">notify_postgres</span></code></a> to
review the currently configured PostgreSQL endpoints on the MinIO deployment.</p>
</li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">&lt;ENDPOINT&gt;</span></code> with the <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">PostgreSQL URI connection string</a>
of the PostgreSQL service endpoint. MinIO supports <code class="docutils literal notranslate"><span class="pre">key=value</span></code> format
for the PostgreSQL connection string. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;host=https://postgresql.example.com</span> <span class="pre">port=5432</span> <span class="pre">...&quot;</span></code></p>
<p>For more complete documentation on supported PostgreSQL connection
string parameters, see <a class="reference external" href="https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING">PostgreSQL Connection String</a>.</p>
</li>
</ul>
<p>See <a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#minio-server-config-bucket-notification-postgresql"><span class="std std-ref">PostgreSQL Bucket Notification Configuration Settings</span></a> for complete
documentation on each setting.</p>
</div>
</div>
</section>
<section id="restart-the-minio-deployment">
<h3>1) Restart the MinIO Deployment<a class="headerlink" href="#restart-the-minio-deployment" title="Permalink to this heading"></a></h3>
<p>You must restart the MinIO deployment to apply the configuration changes.
Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-service.html#mc.admin.service.restart" title="mc.admin.service.restart"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">service</span> <span class="pre">restart</span></code></a> command to restart the deployment.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>service<span class="w"> </span>restart<span class="w"> </span>ALIAS
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment to
restart.</p>
<p>The <a class="reference internal" href="../../reference/minio-server/minio-server.html#command-minio.server" title="minio.server"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">minio</span> <span class="pre">server</span></code></a> process prints a line on startup for each configured PostgreSQL
target similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SQS<span class="w"> </span>ARNs:<span class="w"> </span>arn:minio:sqs::primary:postgresql
</pre></div>
</div>
<p>You must specify the ARN resource when configuring bucket notifications with
the associated PostgreSQL deployment as a target.</p>
<div class="note admonition">
<p class="admonition-title">Identifying the ARN for your bucket notifications</p>
<p>You defined the <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> to assign to the target ARN for your bucket notifications when creating the endpoint previously.
The steps below return the ARNs configured on the deployment.
Identify the ARN created previously by looking for the <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> you specified.</p>
<p><strong>Review the JSON output</strong></p>
<ol class="arabic">
<li><p>Copy and run the following command, replacing <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>info<span class="w"> </span>--json<span class="w"> </span>ALIAS
</pre></div>
</div>
</li>
<li><p>In the JSON output, look for the key <code class="docutils literal notranslate"><span class="pre">info.sqsARN</span></code>.</p>
<p>The ARN you need is the value of that key that matches the <code class="docutils literal notranslate"><span class="pre">&lt;IDENTIFIER&gt;</span></code> you specified.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">arn:minio:sqs::primary:postgresql</span></code>.</p>
</li>
</ol>
<p><strong>Use jq to parse the JSON for the value</strong></p>
<ol class="arabic">
<li><p><a class="reference external" href="https://stedolan.github.io/jq/">Install jq</a></p></li>
<li><p>Copy and run the following command, replacing <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>info<span class="w"> </span>--json<span class="w"> </span>ALIAS<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w">  </span>.info.sqsARN
</pre></div>
</div>
<p>This returns the ARN to use for notifications, such as <code class="docutils literal notranslate"><span class="pre">arn:minio:sqs::primary:postgresql</span></code></p>
</li>
</ol>
</div>
</section>
<section id="configure-bucket-notifications-using-the-postgresql-endpoint-as-a-target">
<h3>3) Configure Bucket Notifications using the PostgreSQL Endpoint as a Target<a class="headerlink" href="#configure-bucket-notifications-using-the-postgresql-endpoint-as-a-target" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc/mc-event-add.html#command-mc.event.add" title="mc.event.add"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">event</span> <span class="pre">add</span></code></a> command to add a new bucket notification
event with the configured PostgreSQL service as a target:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>event<span class="w"> </span>add<span class="w"> </span>ALIAS/BUCKET<span class="w"> </span>arn:minio:sqs::primary:postgresql<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--event<span class="w"> </span>EVENTS
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of a MinIO deployment.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">BUCKET</span></code> with the name of the bucket in which to configure the ÃŸevent.</p></li>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">EVENTS</span></code> with a comma-separated list of <a class="reference internal" href="../../reference/minio-mc/mc-event-add.html#mc-event-supported-events"><span class="std std-ref">events</span></a> for which MinIO triggers notifications.</p></li>
</ul>
<p>Use <a class="reference internal" href="../../reference/minio-mc/mc-event-list.html#command-mc.event.ls" title="mc.event.ls"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">event</span> <span class="pre">ls</span></code></a> to view all configured bucket events for
a given notification target:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>event<span class="w"> </span>ls<span class="w"> </span>ALIAS/BUCKET<span class="w"> </span>arn:minio:sqs::primary:postgresql
</pre></div>
</div>
</section>
<section id="validate-the-configured-events">
<h3>4) Validate the Configured Events<a class="headerlink" href="#validate-the-configured-events" title="Permalink to this heading"></a></h3>
<p>Perform an action on the bucket for which you configured the new event and
check the PostgreSQL service for the notification data. The action required
depends on which <a class="reference internal" href="../../reference/minio-mc/mc-event-add.html#mc.event.add.-event" title="mc.event.add.--event"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">events</span></code></a> were specified
when configuring the bucket notification.</p>
<p>For example, if the bucket notification configuration includes the
<code class="docutils literal notranslate"><span class="pre">s3:ObjectCreated:Put</span></code> event, you can use the
<a class="reference internal" href="../../reference/minio-mc/mc-cp.html#command-mc.cp" title="mc.cp"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">cp</span></code></a> command to create a new object in the bucket and trigger
a notification.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>cp<span class="w"> </span>~/data/new-object.txt<span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
</section>
</section>
<section id="update-a-postgresql-endpoint-in-a-minio-deployment">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Update a PostgreSQL Endpoint in a MinIO Deployment</a><a class="headerlink" href="#update-a-postgresql-endpoint-in-a-minio-deployment" title="Permalink to this heading"></a></h2>
<p>The following procedure updates an existing PostgreSQL service endpoint for
supporting <a class="reference internal" href="bucket-notifications.html#minio-bucket-notifications"><span class="std std-ref">bucket notifications</span></a> in a MinIO
deployment.</p>
<section id="id1">
<h3>Prerequisites<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<section id="id2">
<h4>PostgreSQL 9.5 and later<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h4>
<p>MinIO relies on features introduced with PostgreSQL 9.5.</p>
</section>
<section id="id3">
<h4>MinIO <code class="docutils literal notranslate"><span class="pre">mc</span></code> Command Line Tool<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h4>
<p>This procedure uses the <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> command line tool for certain actions.
See the <code class="docutils literal notranslate"><span class="pre">mc</span></code> <a class="reference internal" href="../../reference/minio-mc.html#mc-install"><span class="std std-ref">Quickstart</span></a> for installation instructions.</p>
</section>
</section>
<section id="list-configured-postgresql-endpoints-in-the-deployment">
<h3>1) List Configured PostgreSQL Endpoints In The Deployment<a class="headerlink" href="#list-configured-postgresql-endpoints-in-the-deployment" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-config.html#mc.admin.config.get" title="mc.admin.config.get"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">config</span> <span class="pre">get</span></code></a> command to list the currently
configured PostgreSQL service endpoints in the deployment:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>config<span class="w"> </span>get<span class="w"> </span>ALIAS/<span class="w"> </span>notify_postgres
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the MinIO deployment.</p>
<p>The command output resembles the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>notify_postgres:primary<span class="w"> </span><span class="nv">queue_dir</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="nv">connection_string</span><span class="o">=</span><span class="s2">&quot;postgresql://&quot;</span><span class="w"> </span><span class="nv">queue_limit</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="w">  </span><span class="nv">table</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="nv">format</span><span class="o">=</span><span class="s2">&quot;namespace&quot;</span>
notify_postgres:secondary<span class="w"> </span><span class="nv">queue_dir</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="nv">connection_string</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="nv">queue_limit</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="w">  </span><span class="nv">table</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="nv">format</span><span class="o">=</span><span class="s2">&quot;namespace&quot;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres" title="mc-conf.notify_postgres"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span></code></a> key is the top-level configuration key for an
<a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#minio-server-config-bucket-notification-postgresql"><span class="std std-ref">PostgreSQL Notification Settings</span></a>. The
<a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.connection_string" title="mc-conf.notify_postgres.connection_string"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">connection_string</span></code></a> key specifies
the PostgreSQL service endpoint for the given <cite>notify_postgres</cite> key. The
<code class="docutils literal notranslate"><span class="pre">notify_postgres:&lt;IDENTIFIER&gt;</span></code> suffix describes the unique identifier for
that PostgreSQL service endpoint.</p>
<p>Note the identifier for the PostgreSQL service endpoint you want to update for
the next step.</p>
</section>
<section id="update-the-postgresql-endpoint">
<h3>2) Update the PostgreSQL Endpoint<a class="headerlink" href="#update-the-postgresql-endpoint" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-config.html#mc.admin.config.set" title="mc.admin.config.set"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">config</span> <span class="pre">set</span></code></a> command to set the new configuration
for the PostgreSQL service endpoint:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>ALIAS/<span class="w"> </span>notify_postgres:IDENTIFIER<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">connection_string</span><span class="o">=</span><span class="s2">&quot;ENDPOINT&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">table</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">format</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">max_open_connections</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">queue_dir</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">queue_limit</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">comment</span><span class="o">=</span><span class="s2">&quot;&lt;string&gt;&quot;</span>
</pre></div>
</div>
<p>The following configuration settings are the <em>minimum</em> required for a
PostgreSQL service endpoint:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.connection_string" title="mc-conf.notify_postgres.connection_string"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">connection_string</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.table" title="mc-conf.notify_postgres.table"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">table</span></code></a></p></li>
<li><p><a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#mc-conf.notify_postgres.format" title="mc-conf.notify_postgres.format"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">notify_postgres</span> <span class="pre">format</span></code></a></p></li>
</ul>
<p>All other configuration settings are <em>optional</em>. See
<a class="reference internal" href="../../reference/minio-server/settings/notifications/postgresql.html#minio-server-config-bucket-notification-postgresql"><span class="std std-ref">PostgreSQL Notification Settings</span></a> for a complete list of
PostgreSQL configuration settings.</p>
</section>
<section id="id4">
<h3>3) Restart the MinIO Deployment<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>You must restart the MinIO deployment to apply the configuration changes.
Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-service.html#mc.admin.service.restart" title="mc.admin.service.restart"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">service</span> <span class="pre">restart</span></code></a> command to restart the deployment.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>service<span class="w"> </span>restart<span class="w"> </span>ALIAS
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">ALIAS</span></code> with the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment to
restart.</p>
<p>The <a class="reference internal" href="../../reference/minio-server/minio-server.html#command-minio.server" title="minio.server"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">minio</span> <span class="pre">server</span></code></a> process prints a line on startup for each configured PostgreSQL
target similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>SQS<span class="w"> </span>ARNs:<span class="w"> </span>arn:minio:sqs::primary:postgresql
</pre></div>
</div>
</section>
<section id="validate-the-changes">
<h3>4) Validate the Changes<a class="headerlink" href="#validate-the-changes" title="Permalink to this heading"></a></h3>
<p>Perform an action on a bucket which has an event configuration using the updated
PostgreSQL service endpoint and check the PostgreSQL service for the notification data. The
action required depends on which <a class="reference internal" href="../../reference/minio-mc/mc-event-add.html#mc.event.add.-event" title="mc.event.add.--event"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">events</span></code></a> were
specified when configuring the bucket notification.</p>
<p>For example, if the bucket notification configuration includes the
<code class="docutils literal notranslate"><span class="pre">s3:ObjectCreated:Put</span></code> event, you can use the
<a class="reference internal" href="../../reference/minio-mc/mc-cp.html#command-mc.cp" title="mc.cp"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">cp</span></code></a> command to create a new object in the bucket and trigger
a notification.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>cp<span class="w"> </span>~/data/new-object.txt<span class="w"> </span>ALIAS/BUCKET
</pre></div>
</div>
</section>
</section>
</section>


            </div><div class="footer">
   This work is licensed under a
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License.</a>
   2020-Present, MinIO, Inc. 
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img height="10" alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
   </a>
</div>
         </div>
      </div>
   </section><div id="cookie">
    <div class="container">
        <div class="cookie__text">
            <strong>Your privacy is important to us:</strong>
            We use cookies in order to give you a better experience. If you wish so, you can always review our 
            <a target="_blank" rel="noreferrer noopener" href="https://min.io/privacy-policy">Privacy Policy</a>.
        </div>

        <button type="button" id="cookie__btn">Accept</button>
    </div>
</div><script>
    // Dark mode and read mode detection

    // Dark mode
    /*var isDarkMode = localStorage.getItem("dark-mode");
    var dmToggleBtn = document.getElementById("dark-mode-toggle");
    if (isDarkMode === "true") {
       document.documentElement.classList.add("dark-mode");
       dmToggleBtn.classList.add("active");
    }

    // Read mode
    var isReadMode = localStorage.getItem("read-mode");
    var rmToggleBtn = document.getElementById("read-mode-toggle");

    if (isReadMode === "true") {
        document.documentElement.classList.add("read-mode");
        rmToggleBtn.classList.add("active");
    }*/
 </script>
  </body>
</html>
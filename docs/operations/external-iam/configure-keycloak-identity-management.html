

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Configure MinIO for Authentication using Keycloak &#8212; MinIO Object Storage (AGPLv3)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <script defer="defer" src="../../_static/js/main.js"></script>
    <script defer="defer" src="../../_static/js/instantSearch.js"></script>
    <link rel="canonical" href="https://docs.min.io/community/minio-object-store/operations/external-iam/configure-keycloak-identity-management.html" />
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Configure MinIO for Authentication using OpenID" href="configure-openid-external-identity-management.html" />
    <link rel="prev" title="Configure MinIO for Authentication using Active Directory / LDAP" href="configure-ad-ldap-external-identity-management.html" /><meta name="pagename" content="operations/external-iam/configure-keycloak-identity-management"/>

<!-- Preload fonts and scripts -->
<link rel="preload" href="../../_static/fonts/inter/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://E1CSOK3UC2-dsn.algolia.net" crossorigin />

<!-- Google Tag Manager: docs.min.io -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-56L9FLVL');</script>

<!-- Google Tag Manager: main -->
<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TWQNHTD');
</script>

<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-56860620-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Linkedin -->
<script>
    _linkedin_partner_id = "1153348";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);

    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
</script>

<!-- Leadfeeder -->
<script>
    (function(){
        window.ldfdr = window.ldfdr || {};
        (function(d, s, ss, fs){
        fs = d.getElementsByTagName(s)[0];
        function ce(src){
            var cs  = d.createElement(s);
            cs.src = src;
            setTimeout(function(){fs.parentNode.insertBefore(cs,fs)}, 1);
        }
        ce(ss);
        })(document, 'script', 'https://sc.lfeeder.com/lftracker_v1_DzLR5a5kKJA7BoQ2.js');
    })();
</script>
   
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  


  </head><body><!-- Google Tag Manager: docs.min.io (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56L9FLVL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><header class="header inactive">
   <div class="container">
      <div class="header__inner">
         <a href="https://min.io?jmp=docs-minio-object-store" class="header__logo">
            <svg viewBox="0 0 162.612 24.465">
               <path d="M52.751.414h9.108v23.63h-9.108zM41.711.74l-18.488 9.92a.919.919 0 0 1-.856 0L3.879.74A2.808 2.808 0 0 0 2.558.414h-.023A2.4 2.4 0 0 0 0 2.641v21.376h9.1V13.842a.918.918 0 0 1 1.385-.682l10.361 5.568a3.634 3.634 0 0 0 3.336.028l10.933-5.634a.917.917 0 0 1 1.371.69v10.205h9.1V2.641A2.4 2.4 0 0 0 43.055.414h-.023a2.808 2.808 0 0 0-1.321.326zm65.564-.326h-9.237v10.755a.913.913 0 0 1-1.338.706L72.762.675a2.824 2.824 0 0 0-1.191-.261h-.016a2.4 2.4 0 0 0-2.535 2.227v21.377h9.163V13.275a.914.914 0 0 1 1.337-.707l24.032 11.2a2.813 2.813 0 0 0 1.188.26 2.4 2.4 0 0 0 2.535-2.227zm7.161 23.63V.414h4.191v23.63zm28.856.421c-11.274 0-19.272-4.7-19.272-12.232C124.02 4.741 132.066 0 143.292 0s19.32 4.7 19.32 12.233-7.902 12.232-19.32 12.232zm0-21.333c-8.383 0-14.84 3.217-14.84 9.1 0 5.926 6.457 9.1 14.84 9.1s14.887-3.174 14.887-9.1c0-5.883-6.504-9.1-14.887-9.1z" />
            </svg>
         </a>
         
         <!--
         <div class="header__actions">
            

            <button id="dark-mode-toggle" type="button" class="icon icon--switch"><svg width="21" height="21" viewBox="0 0 48 48" fill="currentColor">
    <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-6.75 3.975-11.45Q13.95 7.85 20.4 6.5q2.05-.4 2.8.7t-.05 3q-.45 1.15-.7 2.35-.25 1.2-.25 2.45 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q1.25 0 2.425-.225 1.175-.225 2.275-.625 2.15-.8 3.2.075 1.05.875.55 2.975-1.35 6.05-6.05 10.025Q30.7 42 24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z" />
</svg><svg width="17" height="17" viewBox="0 0 17 17">
    <path d="M8.5 2.898c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415V.58c0-.167.055-.306.164-.415S8.333 0 8.5 0s.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415s-.248.164-.415.164zm3.96 1.642c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.217-1.236c.116-.116.254-.174.415-.174s.299.058.415.174.174.251.174.406-.058.29-.174.406L13.272 4.54c-.116.116-.251.174-.406.174s-.29-.058-.406-.174zm2.222 4.54c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164S17 8.333 17 8.5s-.055.306-.164.415-.248.164-.415.164h-1.739zM8.5 17c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415v-1.739c0-.167.055-.306.164-.415s.248-.164.415-.164.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415S8.667 17 8.5 17zM3.728 4.54L2.492 3.323c-.116-.116-.174-.254-.174-.415s.058-.299.174-.415.251-.174.406-.174.29.058.406.174L4.54 3.728c.116.116.174.251.174.406s-.058.29-.174.406c-.116.103-.254.155-.415.155s-.293-.052-.396-.155zm9.968 9.968l-1.236-1.236c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406c.103-.103.235-.155.396-.155s.299.052.415.155l1.256 1.217c.116.116.171.254.164.415s-.061.299-.164.415c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM.58 9.08c-.167 0-.306-.055-.415-.164S0 8.667 0 8.5s.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164s.164.248.164.415-.055.306-.164.415-.248.164-.415.164H.58zm1.912 5.428c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.236-1.236c.103-.103.235-.155.396-.155s.299.052.415.155c.116.116.174.254.174.415s-.058.299-.174.415l-1.217 1.217c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM8.5 13.136a4.47 4.47 0 0 1-3.284-1.352A4.47 4.47 0 0 1 3.864 8.5a4.47 4.47 0 0 1 1.352-3.284A4.47 4.47 0 0 1 8.5 3.864a4.47 4.47 0 0 1 3.284 1.352A4.47 4.47 0 0 1 13.136 8.5a4.47 4.47 0 0 1-1.352 3.284A4.47 4.47 0 0 1 8.5 13.136zm0-1.159a3.35 3.35 0 0 0 2.463-1.014A3.35 3.35 0 0 0 11.977 8.5a3.35 3.35 0 0 0-1.014-2.463A3.35 3.35 0 0 0 8.5 5.023a3.35 3.35 0 0 0-2.463 1.014A3.35 3.35 0 0 0 5.023 8.5a3.35 3.35 0 0 0 1.014 2.463A3.35 3.35 0 0 0 8.5 11.977z" fill="currentColor" />
</svg>
               Dark Mode
            </button>
         </div>
         -->
      </div>
  
      <h2 class="header__title hidden-rm">Documentation</h2>

      

      <!--<div class="platform-nav">
    <div class="platform-nav__main">
        <div class="container">
        </div>
        <button type="button" class="icon search-toggle search-toggle--keyboard visible-rm"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg>
            Search
        </button>
    </div>
</div> -->
         <div id="search">
            <div class="search__inner">
               <div id="search-box"></div>
               
               <div class="search__dropdown">
                  <div id="search-filters"></div>
                  <div id="search-clear"></div>
                  <div id="search-results"></div>
                  <div id="search-powered-by"></div>
               </div>
            </div>
         </div>
   </div>
 </header>
   <section class="content">
      <div class="container">
         <div class="sidebar inactive scrollbar">
            <div class="hide-aside visible-rm">
               <button type="button" class="icon"><svg width="12" height="12">
    <path d="M11.253 1.691L10.125.563 5.653 5.035 1.181.563.053 1.691l4.472 4.472-4.472 4.472 1.128 1.128 4.472-4.472 4.472 4.472 1.128-1.128-4.472-4.472z" fill-rule="evenodd"/>
</svg>
                     Close Doc Navigation
               </button>
            </div>

            <a class="sidebar__title" href="../../index.html">MinIO Object Storage</a>
            
            
      <nav
         class="docs"
         role="navigation"
      >
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../deployments/installation.html">Installation and Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../replication/multi-site-replication.html">Site Replication Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Core Operational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring and Alerts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../external-iam.html">External Identity Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="configure-ad-ldap-external-identity-management.html">Configure MinIO for Authentication using Active Directory / LDAP</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Configure MinIO for Authentication using Keycloak</a></li>
<li class="toctree-l2"><a class="reference internal" href="configure-openid-external-identity-management.html">Configure MinIO for Authentication using OpenID</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../server-side-encryption.html">Data Encryption (SSE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network-encryption.html">Network Encryption (TLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../checklists.html">Deployment Checklists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-recovery.html">Recover after Hardware Failure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/minio-console.html">MinIO Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/object-management.html">Object Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/monitoring.html">Monitoring Bucket and Object Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/identity-access-management.html">Identity and Access Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/server-side-encryption.html">Server-Side Encryption of Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/bucket-replication.html">Bucket Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/batch-framework.html">Batch Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/concepts.html">Core Administration Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/minio-drivers.html">Software Development Kits (SDK)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/security-token-service.html">Security Token Service (STS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/transforms-with-object-lambda.html">Transforms with Object Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/file-transfer-protocol.html">File Transfer Protocol (FTP/SFTP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/kubernetes.html">Kubernetes Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/baremetal.html">Baremetal Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/s3-api-compatibility.html">S3 API Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations/integrations.html">Integrations</a></li>
</ul>

      </nav>
         </div><div class="content__toc scrollbar scrollbar--hover">
  	<button data-aside-toggle="doc" class="icon" type="button"><svg width="17" height="13" viewbox="0 0 17 13">
    <path d="M16.034 0H.966C.433 0 0 .346 0 .773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773S16.567 0 16.034 0zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773z" />
</svg> TOC Menu
  	</button>

  	<div id="content-toc"></div>
		<button class="icon search-toggle" type="button"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg> Search
		</button>
</div>

         <div class="content__main">
            <div class="content__body">
               
  <section id="configure-minio-for-authentication-using-keycloak">
<span id="minio-authenticate-using-keycloak"></span><h1>Configure MinIO for Authentication using Keycloak<a class="headerlink" href="#configure-minio-for-authentication-using-keycloak" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#prerequisites" id="id2">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#configure-minio-for-keycloak-identity-management" id="id3">Configure MinIO for Keycloak Identity Management</a></p></li>
<li><p><a class="reference internal" href="#enable-the-keycloak-admin-rest-api" id="id4">Enable the Keycloak Admin REST API</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>This procedure configures MinIO to use <a class="reference external" href="https://www.keycloak.org/">Keycloak</a> as an external IDentity Provider (IDP) for authentication of users via the OpenID Connect (OIDC) protocol.</p>
<p>This page has procedures for configuring OIDC for MinIO deployments in Kubernetes and Baremetal infrastructures.</p>
<p>Select the tab corresponding to your infrastructure to switch between instruction sets.</p>
<div class="sd-tab-set parent-tab docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="k8s" for="sd-tab-item-0">
Kubernetes</label><div class="sd-tab-content docutils">
<p>For MinIO Tenants deployed using the <a class="reference internal" href="../deployments/kubernetes.html#minio-kubernetes"><span class="std std-ref">MinIO Kubernetes Operator</span></a>, this procedure covers:</p>
<ul class="simple">
<li><p>Configure Keycloak for use with MinIO authentication and authorization</p></li>
<li><p>Configure a new or existing MinIO Tenant to use Keycloak as the OIDC provider</p></li>
<li><p>Create policies to control access of Keycloak-authenticated users</p></li>
<li><p>Log into the MinIO Tenant Console using SSO and a Keycloak-managed identity</p></li>
<li><p>Generate temporary S3 access credentials using the <code class="docutils literal notranslate"><span class="pre">AssumeRoleWithWebIdentity</span></code> Security Token Service (STS) API</p></li>
</ul>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
</input><label class="sd-tab-label" data-sync-id="baremetal" for="sd-tab-item-1">
Baremetal</label><div class="sd-tab-content docutils">
<p>For MinIO deployments on baremetal infrastructure, this procedure covers:</p>
<ul class="simple">
<li><p>Configure Keycloak for use with MinIO authentication and authorization</p></li>
<li><p>Configure a new or existing MinIO cluster to use Keycloak as the OIDC provider</p></li>
<li><p>Create policies to control access of Keycloak-authenticated users</p></li>
<li><p>Log into the MinIO Console using SSO and a Keycloak-managed identity</p></li>
<li><p>Generate temporary S3 access credentials using the <code class="docutils literal notranslate"><span class="pre">AssumeRoleWithWebIdentity</span></code> Security Token Service (STS) API</p></li>
</ul>
</div>
</div>
<p>This procedure was written and tested against Keycloak <code class="docutils literal notranslate"><span class="pre">21.0.0</span></code>.
The provided instructions may work against other Keycloak versions.
This procedure assumes you have prior experience with Keycloak and have reviewed <a class="reference external" href="https://www.keycloak.org/documentation">their documentation</a> for guidance and best practices in deploying, configuring, and managing the service.</p>
</section>
<section id="prerequisites">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h2>
<section id="keycloak-deployment-and-realm-configuration">
<h3>Keycloak Deployment and Realm Configuration<a class="headerlink" href="#keycloak-deployment-and-realm-configuration" title="Permalink to this heading"></a></h3>
<p>This procedure assumes an existing Keycloak deployment to which you have administrative access.
Specifically, you must have permission to create and configure Realms, Clients, Client Scopes, Realm Roles, Users, and Groups on the Keycloak deployment.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="k8s" for="sd-tab-item-2">
Kubernetes</label><div class="sd-tab-content docutils">
<p>For Keycloak deployments within the same Kubernetes cluster as the MinIO Tenant, this procedure assumes bidirectional access between the Keycloak and MinIO pods/services.
For Keycloak deployments external to the Kubernetes cluster, this procedure assumes an existing Ingress, Load Balancer, or similar Kubernetes network control component that manages network access to and from the MinIO Tenant.</p>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
</input><label class="sd-tab-label" data-sync-id="baremetal" for="sd-tab-item-3">
Baremetal</label><div class="sd-tab-content docutils">
<p>The MinIO deployment must have bidirectional access to the target OIDC service.</p>
</div>
</div>
<p>Ensure each user identity intended for use with MinIO has the appropriate <a class="reference internal" href="../../administration/identity-access-management/oidc-access-management.html#minio-external-identity-management-openid-access-control"><span class="std std-ref">claim</span></a> configured such that MinIO can associate a <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> to the authenticated user.
An OpenID user with no assigned policy has no permission to access any action or resource on the MinIO cluster.</p>
</section>
<section id="access-to-minio-cluster">
<h3>Access to MinIO Cluster<a class="headerlink" href="#access-to-minio-cluster" title="Permalink to this heading"></a></h3>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="k8s" for="sd-tab-item-4">
Kubernetes</label><div class="sd-tab-content docutils">
<p>You must have access to the MinIO Operator Console web UI.
You can either expose the MinIO Operator Console service using your preferred Kubernetes routing component, or use temporary port forwarding to expose the Console service port on your local machine.</p>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
</input><label class="sd-tab-label" data-sync-id="baremetal" for="sd-tab-item-5">
Baremetal</label><div class="sd-tab-content docutils">
<p>This procedure uses <a class="reference internal" href="../../reference/minio-mc.html#command-mc" title="mc"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span></code></a> for performing operations on the MinIO cluster.
Install <code class="docutils literal notranslate"><span class="pre">mc</span></code> on a machine with network access to the cluster.
See the <code class="docutils literal notranslate"><span class="pre">mc</span></code> <a class="reference internal" href="../../reference/minio-mc.html#mc-install"><span class="std std-ref">Installation Quickstart</span></a> for instructions on downloading and installing <code class="docutils literal notranslate"><span class="pre">mc</span></code>.</p>
<p>This procedure assumes a configured <a class="reference internal" href="../../reference/minio-mc/mc-alias.html#command-mc.alias" title="mc.alias"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">alias</span></code></a> for the MinIO cluster.</p>
</div>
</div>
</section>
</section>
<section id="configure-minio-for-keycloak-identity-management">
<span id="minio-external-identity-management-keycloak-configure"></span><h2><a class="toc-backref" href="#id3" role="doc-backlink">Configure MinIO for Keycloak Identity Management</a><a class="headerlink" href="#configure-minio-for-keycloak-identity-management" title="Permalink to this heading"></a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-6" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="k8s" for="sd-tab-item-6">
Kubernetes</label><div class="sd-tab-content docutils">
<ol class="arabic">
<li><p>Configure or Create a Client for Accessing Keycloak</p>
<p>Authenticate to the Keycloak <span class="guilabel">Administrative Console</span> and navigate to <span class="guilabel">Clients</span>.</p>
<p>Select <span class="guilabel">Create client</span> and follow the instructions to create a new Keycloak client for MinIO.
Fill in the specified inputs as follows:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Client ID</span></p></th>
<td><p>Set to a unique identifier for MinIO (<code class="docutils literal notranslate"><span class="pre">minio</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Client type</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">OpenID</span> <span class="pre">Connect</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Always display in console</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Client authentication</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Authentication flow</span></p></th>
<td><p>Toggle on <code class="docutils literal notranslate"><span class="pre">Standard</span> <span class="pre">flow</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>(Optional) <span class="guilabel">Authentication flow</span></p></th>
<td><p>Toggle on <code class="docutils literal notranslate"><span class="pre">Direct</span> <span class="pre">access</span> <span class="pre">grants</span></code> (API testing)</p></td>
</tr>
</tbody>
</table>
<p>Keycloak deploys the client with a default set of configuration values.
Modify these values as necessary for your Keycloak setup and desired behavior.
The following table provides a baseline of settings and values to configure:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Root URL</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">${authBaseUrl}</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Home URL</span></p></th>
<td><p>Set to the Realm you want MinIO to use (<code class="docutils literal notranslate"><span class="pre">/realms/master/account/</span></code>)</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Valid Redirect URI</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Keys -&gt; Use JWKS URL</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Advanced -&gt; Advanced Settings -&gt; Access Token Lifespan</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">Hour</span></code>.</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Create Client Scope for MinIO Client</p>
<p>Client scopes allow Keycloak to map user attributes as part of the JSON Web Token (JWT) returned in authentication requests.
This allows MinIO to reference those attributes when assigning policies to the user.
This step creates the necessary client scope to support MinIO authorization after successful Keycloak authentication.</p>
<p>Navigate to the <span class="guilabel">Client scopes</span> view and create a new client scope for MinIO authorization:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Name</span></p></th>
<td><p>Set to any recognizable name for the policy (<code class="docutils literal notranslate"><span class="pre">minio-authorization</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Include in token scope</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
</tbody>
</table>
<p>Once created, select the scope from the list and navigate to <span class="guilabel">Mappers</span>.</p>
<p>Select <span class="guilabel">Configure a new mapper</span> to create a new mapping:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">User Attribute</span></p></th>
<td><p>Select the Mapper Type</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Name</span></p></th>
<td><p>Set to any recognizable name for the mapping (<code class="docutils literal notranslate"><span class="pre">minio-policy-mapper</span></code>)</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">User Attribute</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">policy</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Token Claim Name</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">policy</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Add to ID token</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Claim JSON Type</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Multivalued</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p>
<p>This allows setting multiple <code class="docutils literal notranslate"><span class="pre">policy</span></code> values in the single claim.</p>
</td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Aggregate attribute values</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p>
<p>This allows users to inherit any <code class="docutils literal notranslate"><span class="pre">policy</span></code> set in their Groups</p>
</td>
</tr>
</tbody>
</table>
<p>Once created, assign the Client Scope to the MinIO client.</p>
<ol class="arabic simple">
<li><p>Navigate to <span class="guilabel">Clients</span> and select the MinIO client.</p></li>
<li><p>Select <span class="guilabel">Client scopes</span>, then select <span class="guilabel">Add client scope</span>.</p></li>
<li><p>Select the previously created scope and set the <span class="guilabel">Assigned type</span> to <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p></li>
</ol>
</li>
<li><p>Apply the Necessary Attribute to Keycloak Users/Groups</p>
<p>You must assign an attribute named <code class="docutils literal notranslate"><span class="pre">policy</span></code> to the Keycloak Users or Groups.
Set the value to any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> on the MinIO deployment.</p>
<p>For Users, navigate to <span class="guilabel">Users</span> and select or create the User:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Credentials</span></p></th>
<td><p>Set the user password to a permanent value if not already set</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Attributes</span></p></th>
<td><p>Create a new attribute with key <code class="docutils literal notranslate"><span class="pre">policy</span></code> and value of any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> (<code class="docutils literal notranslate"><span class="pre">consoleAdmin</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>For Groups, navigate to <span class="guilabel">Groups</span> and select or create the Group:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Attributes</span></p></th>
<td><p>Create a new attribute with key <code class="docutils literal notranslate"><span class="pre">policy</span></code> and value of any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> (<code class="docutils literal notranslate"><span class="pre">consoleAdmin</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>You can assign users to groups such that they inherit the specified <code class="docutils literal notranslate"><span class="pre">policy</span></code> attribute.
If you set the Mapper settings to enable <span class="guilabel">Aggregate attribute values</span>, Keycloak includes the aggregated array of policies as part of the authenticated userâ€™s JWT token.
MinIO can use this list of policies when authorizing the user.</p>
<p>You can test the configured policies of a user by using the Keycloak API:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;client_id=minio&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_secret=secretvalue&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;grant_type=password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;username=minio-user-1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;password=minio-user-1-password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://keycloak-service.keycloak-namespace.svc.cluster-domain.example/realms/REALM/protocol/openid-connect/token
</pre></div>
</div>
<p>If successful, the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> contains the JWT necessary to use the MinIO <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">AssumeRoleWithWebIdentity</span></a> STS API and generate S3 credentials.</p>
<p>You can use a JWT decoder to review the payload and ensure it contains the <code class="docutils literal notranslate"><span class="pre">policy</span></code> key with one or more MinIO policies listed.</p>
</li>
<li><p>Configure MinIO for Keycloak Authentication</p></li>
</ol>
<p>You can use the <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#mc.idp.openid.add" title="mc.idp.openid.add"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span> <span class="pre">add</span></code></a> command to create a new configuration for the Keycloak service.
The command takes all supported <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-open-id-config-settings"><span class="std std-ref">OpenID Configuration Settings</span></a>:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>idp<span class="w"> </span>openid<span class="w"> </span>add<span class="w"> </span>ALIAS<span class="w"> </span>PRIMARY_IAM<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">client_id</span><span class="o">=</span>MINIO_CLIENT<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">client_secret</span><span class="o">=</span>MINIO_CLIENT_SECRET<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">config_url</span><span class="o">=</span><span class="s2">&quot;https://keycloak-service.keycloak-namespace.svc.cluster-domain.example/realms/REALM/.well-known/openid-configuration&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">display_name</span><span class="o">=</span><span class="s2">&quot;SSO_IDENTIFIER&quot;</span>
<span class="w">   </span><span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;openid,email,preferred_username&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">redirect_uri_dynamic</span><span class="o">=</span><span class="s2">&quot;on&quot;</span>
</pre></div>
</div>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">PRIMARY_IAM</span></code></p></th>
<td><p>Set to a unique identifier for the Keycloak service, such as <code class="docutils literal notranslate"><span class="pre">keycloak_primary</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">MINIO_CLIENT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">MINIO_CLIENT_SECRET</span></code></div>
</div>
</th>
<td><p>Set to the Keycloak client ID and secret configured in Step 1</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">config_url</span></code></p></th>
<td><p>Set to the address of the Keycloak OpenID configuration document (keycloak-url.example.net:8080)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">display_name</span></code></p></th>
<td><p>Set to a user-facing name the MinIO Console displays as part of the Single-Sign On (SSO) workflow for the configured Keycloak service</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">scopes</span></code></p></th>
<td><p>Set to a list of OpenID scopes you want to include in the JWT, such as <code class="docutils literal notranslate"><span class="pre">preferred_username</span></code> or <code class="docutils literal notranslate"><span class="pre">email</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">redirect_uri_dynamic</span></code></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">on</span></code></p>
<p>Substitutes the MinIO Console address used by the client as part of the Keycloak redirect URI.
Keycloak returns authenticated users to the Console using the provided URI.</p>
<p>For MinIO Console deployments behind a reverse proxy, load balancer, or similar network control plane, you can instead use the <a class="reference internal" href="../../reference/minio-server/settings/console.html#envvar.MINIO_BROWSER_REDIRECT_URL" title="envvar.MINIO_BROWSER_REDIRECT_URL"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_BROWSER_REDIRECT_URL</span></code></a> variable to set the redirect address for Keycloak to use.</p>
</td>
</tr>
</tbody>
</table>
<p>Restart the MinIO deployment for the changes to apply.</p>
<p>Check the MinIO logs and verify that startup succeeded with no errors related to the OIDC configuration.</p>
<ol class="arabic">
<li><p>Generate Application Credentials using the Security Token Service (STS)</p>
<p>Applications using an S3-compatible SDK must specify credentials in the form of an access key and secret key.
The MinIO <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">AssumeRoleWithWebIdentity</span></a> API returns the necessary temporary credentials, including a required session token, using a JWT returned by Keycloak after authentication.</p>
<p>You can test this workflow using the following sequence of HTTP calls and the <code class="docutils literal notranslate"><span class="pre">curl</span></code> utility:</p>
<ol class="arabic">
<li><p>Authenticate as a Keycloak user and retrieve the JWT token</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://keycloak-service.keycloak-namespace.svc.cluster-domain.example/realms/REALM/protocol/openid-connect/token&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;username=USER&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;password=PASSWORD&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;grant_type=password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_id=CLIENT&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_secret=SECRET&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">USER</span></code> and <code class="docutils literal notranslate"><span class="pre">PASSWORD</span></code> with the credentials of a Keycloak user on the <code class="docutils literal notranslate"><span class="pre">REALM</span></code>.</p></li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">CLIENT</span></code> and <code class="docutils literal notranslate"><span class="pre">SECRET</span></code> with the client ID and secret for the MinIO-specific Keycloak client on the <code class="docutils literal notranslate"><span class="pre">REALM</span></code></p></li>
</ul>
<p>You can process the results using <code class="docutils literal notranslate"><span class="pre">jq</span></code> or a similar JSON-formatting utility.
Extract the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> field to retrieve the necessary access token.
Pay attention to the <code class="docutils literal notranslate"><span class="pre">expires_in</span></code> field to note the number of seconds before the token expires.</p>
</li>
<li><p>Generate MinIO Credentials using the <code class="docutils literal notranslate"><span class="pre">AssumeRoleWithWebIdentity</span></code> API</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://minio.minio-tenant.svc.cluster-domain.example&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;Action=AssumeRoleWithWebIdentity&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;Version=2011-06-15&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;DurationSeconds=86000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;WebIdentityToken=TOKEN&quot;</span>
</pre></div>
</div>
<p>Replace the <code class="docutils literal notranslate"><span class="pre">TOKEN</span></code> with the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> value returned by Keycloak.</p>
<p>The API returns an XML document on success containing the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.AccessKeyId</span></code> - the Access Key for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.SecretAccessKey</span></code> - the Secret Key for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.SessionToken</span></code> - the Session Token for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.Expiration</span></code> - the Expiration Date for the generated credentials</p></li>
</ul>
</li>
<li><p>Test the Credentials</p>
<p>Use your preferred S3-compatible SDK to connect to MinIO using the generated credentials.</p>
<p>For example, the following Python code using the MinIO <a class="reference internal" href="../../developers/python/minio-py.html#minio-python-quickstart"><span class="std std-ref">Python SDK</span></a> connects to the MinIO deployment and returns a list of buckets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">minio</span><span class="w"> </span><span class="kn">import</span> <span class="n">Minio</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">MinIO</span><span class="p">(</span>
   <span class="s2">&quot;minio.minio-tenant.svc.cluster-domain.example&quot;</span><span class="p">,</span>
   <span class="n">access_key</span> <span class="o">=</span> <span class="s2">&quot;ACCESS_KEY&quot;</span><span class="p">,</span>
   <span class="n">secret_key</span> <span class="o">=</span> <span class="s2">&quot;SECRET_KEY&quot;</span><span class="p">,</span>
   <span class="n">session_token</span> <span class="o">=</span> <span class="s2">&quot;SESSION_TOKEN&quot;</span>
   <span class="n">secure</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">list_buckets</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Next Steps</p></li>
</ol>
<p>Applications should implement the <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">STS AssumeRoleWithWebIdentity</span></a> flow using their <a class="reference internal" href="../../developers/minio-drivers.html#minio-drivers"><span class="std std-ref">SDK</span></a> of choice.
When STS credentials expire, applications should have logic in place to regenerate the JWT token, STS token, and MinIO credentials before retrying and continuing operations.</p>
<p>Alternatively, users can generate <a class="reference internal" href="../../administration/identity-access-management/minio-user-management.html#minio-id-access-keys"><span class="std std-ref">access keys</span></a> through the MinIO Console for the purpose of creating long-lived API-key like access using their Keycloak credentials.</p>
</div>
<input id="sd-tab-item-7" name="sd-tab-set-3" type="radio">
</input><label class="sd-tab-label" data-sync-id="baremetal" for="sd-tab-item-7">
Baremetal</label><div class="sd-tab-content docutils">
<ol class="arabic">
<li><p>Configure or Create a Client for Accessing Keycloak</p>
<p>Authenticate to the Keycloak <span class="guilabel">Administrative Console</span> and navigate to <span class="guilabel">Clients</span>.</p>
<p>Select <span class="guilabel">Create client</span> and follow the instructions to create a new Keycloak client for MinIO.
Fill in the specified inputs as follows:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Client ID</span></p></th>
<td><p>Set to a unique identifier for MinIO (<code class="docutils literal notranslate"><span class="pre">minio</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Client type</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">OpenID</span> <span class="pre">Connect</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Always display in console</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Client authentication</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Authentication flow</span></p></th>
<td><p>Toggle on <code class="docutils literal notranslate"><span class="pre">Standard</span> <span class="pre">flow</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p>(Optional) <span class="guilabel">Authentication flow</span></p></th>
<td><p>Toggle on <code class="docutils literal notranslate"><span class="pre">Direct</span> <span class="pre">access</span> <span class="pre">grants</span></code> (API testing)</p></td>
</tr>
</tbody>
</table>
<p>Keycloak deploys the client with a default set of configuration values.
Modify these values as necessary for your Keycloak setup and desired behavior.
The following table provides a baseline of settings and values to configure:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Root URL</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">${authBaseUrl}</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Home URL</span></p></th>
<td><p>Set to the Realm you want MinIO to use (<code class="docutils literal notranslate"><span class="pre">/realms/master/account/</span></code>)</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Valid Redirect URI</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">*</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Keys -&gt; Use JWKS URL</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Advanced -&gt; Advanced Settings -&gt; Access Token Lifespan</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">Hour</span></code>.</p></td>
</tr>
</tbody>
</table>
</li>
<li><p>Create Client Scope for MinIO Client</p>
<p>Client scopes allow Keycloak to map user attributes as part of the JSON Web Token (JWT) returned in authentication requests.
This allows MinIO to reference those attributes when assigning policies to the user.
This step creates the necessary client scope to support MinIO authorization after successful Keycloak authentication.</p>
<p>Navigate to the <span class="guilabel">Client scopes</span> view and create a new client scope for MinIO authorization:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Name</span></p></th>
<td><p>Set to any recognizable name for the policy (<code class="docutils literal notranslate"><span class="pre">minio-authorization</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Include in token scope</span></p></th>
<td><p>Toggle to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
</tbody>
</table>
<p>Once created, select the scope from the list and navigate to <span class="guilabel">Mappers</span>.</p>
<p>Select <span class="guilabel">Configure a new mapper</span> to create a new mapping:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">User Attribute</span></p></th>
<td><p>Select the Mapper Type</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Name</span></p></th>
<td><p>Set to any recognizable name for the mapping (<code class="docutils literal notranslate"><span class="pre">minio-policy-mapper</span></code>)</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">User Attribute</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">policy</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Token Claim Name</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">policy</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Add to ID token</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Claim JSON Type</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">String</span></code></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Multivalued</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p>
<p>This allows setting multiple <code class="docutils literal notranslate"><span class="pre">policy</span></code> values in the single claim.</p>
</td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Aggregate attribute values</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">On</span></code></p>
<p>This allows users to inherit any <code class="docutils literal notranslate"><span class="pre">policy</span></code> set in their Groups</p>
</td>
</tr>
</tbody>
</table>
<p>Once created, assign the Client Scope to the MinIO client.</p>
<ol class="arabic simple">
<li><p>Navigate to <span class="guilabel">Clients</span> and select the MinIO client.</p></li>
<li><p>Select <span class="guilabel">Client scopes</span>, then select <span class="guilabel">Add client scope</span>.</p></li>
<li><p>Select the previously created scope and set the <span class="guilabel">Assigned type</span> to <code class="docutils literal notranslate"><span class="pre">default</span></code>.</p></li>
</ol>
</li>
<li><p>Apply the Necessary Attribute to Keycloak Users/Groups</p>
<p>You must assign an attribute named <code class="docutils literal notranslate"><span class="pre">policy</span></code> to the Keycloak Users or Groups.
Set the value to any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> on the MinIO deployment.</p>
<p>For Users, navigate to <span class="guilabel">Users</span> and select or create the User:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Credentials</span></p></th>
<td><p>Set the user password to a permanent value if not already set</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Attributes</span></p></th>
<td><p>Create a new attribute with key <code class="docutils literal notranslate"><span class="pre">policy</span></code> and value of any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> (<code class="docutils literal notranslate"><span class="pre">consoleAdmin</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>For Groups, navigate to <span class="guilabel">Groups</span> and select or create the Group:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Attributes</span></p></th>
<td><p>Create a new attribute with key <code class="docutils literal notranslate"><span class="pre">policy</span></code> and value of any <a class="reference internal" href="../../administration/identity-access-management/policy-based-access-control.html#minio-policy"><span class="std std-ref">policy</span></a> (<code class="docutils literal notranslate"><span class="pre">consoleAdmin</span></code>)</p></td>
</tr>
</tbody>
</table>
<p>You can assign users to groups such that they inherit the specified <code class="docutils literal notranslate"><span class="pre">policy</span></code> attribute.
If you set the Mapper settings to enable <span class="guilabel">Aggregate attribute values</span>, Keycloak includes the aggregated array of policies as part of the authenticated userâ€™s JWT token.
MinIO can use this list of policies when authorizing the user.</p>
<p>You can test the configured policies of a user by using the Keycloak API:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;client_id=minio&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_secret=secretvalue&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;grant_type=password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;username=minio-user-1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;password=minio-user-1-password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://keycloak-url.example.net:8080/realms/REALM/protocol/openid-connect/token
</pre></div>
</div>
<p>If successful, the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> contains the JWT necessary to use the MinIO <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">AssumeRoleWithWebIdentity</span></a> STS API and generate S3 credentials.</p>
<p>You can use a JWT decoder to review the payload and ensure it contains the <code class="docutils literal notranslate"><span class="pre">policy</span></code> key with one or more MinIO policies listed.</p>
</li>
<li><p>Configure MinIO for Keycloak Authentication</p>
<p>MinIO supports multiple methods for configuring Keycloak authentication:</p>
<ul class="simple">
<li><p>Using a terminal/shell and the <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#command-mc.idp.openid" title="mc.idp.openid"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span></code></a> command</p></li>
<li><p>Using environment variables set prior to starting MinIO</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-8" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-8">
CLI</label><div class="sd-tab-content docutils">
<p>You can use the <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#mc.idp.openid.add" title="mc.idp.openid.add"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span> <span class="pre">add</span></code></a> command to create a new configuration for the Keycloak service.
The command takes all supported <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-open-id-config-settings"><span class="std std-ref">OpenID Configuration Settings</span></a>:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>idp<span class="w"> </span>openid<span class="w"> </span>add<span class="w"> </span>ALIAS<span class="w"> </span>PRIMARY_IAM<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">client_id</span><span class="o">=</span>MINIO_CLIENT<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">client_secret</span><span class="o">=</span>MINIO_CLIENT_SECRET<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">config_url</span><span class="o">=</span><span class="s2">&quot;https://keycloak-url.example.net:8080/realms/REALM/.well-known/openid-configuration&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">display_name</span><span class="o">=</span><span class="s2">&quot;SSO_IDENTIFIER&quot;</span>
<span class="w">   </span><span class="nv">scopes</span><span class="o">=</span><span class="s2">&quot;openid,email,preferred_username&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">redirect_uri_dynamic</span><span class="o">=</span><span class="s2">&quot;on&quot;</span>
</pre></div>
</div>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">PRIMARY_IAM</span></code></p></th>
<td><p>Set to a unique identifier for the Keycloak service, such as <code class="docutils literal notranslate"><span class="pre">keycloak_primary</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">MINIO_CLIENT</span></code></div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">MINIO_CLIENT_SECRET</span></code></div>
</div>
</th>
<td><p>Set to the Keycloak client ID and secret configured in Step 1</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">config_url</span></code></p></th>
<td><p>Set to the address of the Keycloak OpenID configuration document (keycloak-url.example.net:8080)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">display_name</span></code></p></th>
<td><p>Set to a user-facing name the MinIO Console displays as part of the Single-Sign On (SSO) workflow for the configured Keycloak service</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">scopes</span></code></p></th>
<td><p>Set to a list of OpenID scopes you want to include in the JWT, such as <code class="docutils literal notranslate"><span class="pre">preferred_username</span></code> or <code class="docutils literal notranslate"><span class="pre">email</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">redirect_uri_dynamic</span></code></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">on</span></code></p>
<p>Substitutes the MinIO Console address used by the client as part of the Keycloak redirect URI.
Keycloak returns authenticated users to the Console using the provided URI.</p>
<p>For MinIO Console deployments behind a reverse proxy, load balancer, or similar network control plane, you can instead use the <a class="reference internal" href="../../reference/minio-server/settings/console.html#envvar.MINIO_BROWSER_REDIRECT_URL" title="envvar.MINIO_BROWSER_REDIRECT_URL"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_BROWSER_REDIRECT_URL</span></code></a> variable to set the redirect address for Keycloak to use.</p>
</td>
</tr>
</tbody>
</table>
</div>
<input id="sd-tab-item-9" name="sd-tab-set-4" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-9">
Environment Variables</label><div class="sd-tab-content docutils">
<p>Set the following <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-server-envvar-external-identity-management-openid"><span class="std std-ref">environment variables</span></a> prior to starting the container using the <code class="docutils literal notranslate"><span class="pre">-e</span> <span class="pre">ENVVAR=VALUE</span></code> flag.</p>
<p>The following example code sets the minimum required environment variables related to configuring Keycloak as an external identity management provider.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">MINIO_IDENTITY_OPENID_CONFIG_URL_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;https://keycloak-url.example.net:8080/realms/REALM/.well-known/openid-configuration&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_CLIENT_ID_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;MINIO_CLIENT&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_CLIENT_SECRET_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;MINIO_CLIENT_SECRET&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_DISPLAY_NAME_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;SSO_IDENTIFIER&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_SCOPES_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;openid,email,preferred_username&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_REDIRECT_URI_DYNAMIC_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;on&quot;</span>
</pre></div>
</div>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><code class="docutils literal notranslate"><span class="pre">_PRIMARY_IAM</span></code></p></th>
<td><p>Replace the suffix <code class="docutils literal notranslate"><span class="pre">_PRIMARY_IAM</span></code> with a unique identifier for this Keycloak configuration.
For example, <code class="docutils literal notranslate"><span class="pre">MINIO_IDENTITY_OPENID_CONFIG_URL_KEYCLOAK_PRIMARY</span></code>.</p>
<p>You can omit the suffix if you intend to only configure a single OIDC provider for the deployment.</p>
</td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_CONFIG_URL" title="envvar.MINIO_IDENTITY_OPENID_CONFIG_URL"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">CONFIG_URL</span></code></a></p></th>
<td><p>Specify the address of the Keycloak OpenID configuration document (keycloak-url.example.net:8080)</p>
<p>Ensure the <code class="docutils literal notranslate"><span class="pre">REALM</span></code> matches the Keycloak realm you want to use for authenticating users to MinIO</p>
</td>
</tr>
<tr class="row-odd"><th class="stub"><div class="line-block">
<div class="line"><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_CLIENT_ID" title="envvar.MINIO_IDENTITY_OPENID_CLIENT_ID"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">CLIENT_ID</span></code></a></div>
<div class="line"><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_CLIENT_SECRET" title="envvar.MINIO_IDENTITY_OPENID_CLIENT_SECRET"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">CLIENT_SECRET</span></code></a></div>
</div>
</th>
<td><p>Specify the Keycloak client ID and secret configured in Step 1</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_DISPLAY_NAME" title="envvar.MINIO_IDENTITY_OPENID_DISPLAY_NAME"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">DISPLAY_NAME</span></code></a></p></th>
<td><p>Specify the user-facing name the MinIO Console displays as part of the Single-Sign On (SSO) workflow for the configured Keycloak service</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_SCOPES" title="envvar.MINIO_IDENTITY_OPENID_SCOPES"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">OPENID_SCOPES</span></code></a></p></th>
<td><p>Specify the OpenID scopes you want to include in the JWT, such as <code class="docutils literal notranslate"><span class="pre">preferred_username</span></code> or <code class="docutils literal notranslate"><span class="pre">email</span></code></p></td>
</tr>
<tr class="row-even"><th class="stub"><p><a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_REDIRECT_URI_DYNAMIC" title="envvar.MINIO_IDENTITY_OPENID_REDIRECT_URI_DYNAMIC"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">REDIRECT_URI_DYNAMIC</span></code></a></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">on</span></code></p>
<p>Substitutes the MinIO Console address used by the client as part of the Keycloak redirect URI.
Keycloak returns authenticated users to the Console using the provided URI.</p>
<p>For MinIO Console deployments behind a reverse proxy, load balancer, or similar network control plane, you can instead use the <a class="reference internal" href="../../reference/minio-server/settings/console.html#envvar.MINIO_BROWSER_REDIRECT_URL" title="envvar.MINIO_BROWSER_REDIRECT_URL"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_BROWSER_REDIRECT_URL</span></code></a> variable to set the redirect address for Keycloak to use.</p>
</td>
</tr>
</tbody>
</table>
<p>For complete documentation on these variables, see <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-server-envvar-external-identity-management-openid"><span class="std std-ref">OpenID Identity Management Settings</span></a></p>
</div>
</div>
<p>Restart the MinIO deployment for the changes to apply.</p>
<p>Check the MinIO logs and verify that startup succeeded with no errors related to the OIDC configuration.</p>
<p>If you attempt to log in with the Console, you should now see an (SSO) button using the configured <span class="guilabel">Display Name</span>.</p>
<p>Specify a configured user and attempt to log in.
MinIO should automatically redirect you to the Keycloak login entry.
Upon successful authentication, Keycloak should redirect you back to the MinIO Console using either the originating Console URL <em>or</em> the <span class="guilabel">Redirect URI</span> if configured.</p>
</li>
<li><p>Generate Application Credentials using the Security Token Service (STS)</p>
<p>Applications using an S3-compatible SDK must specify credentials in the form of an access key and secret key.
The MinIO <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">AssumeRoleWithWebIdentity</span></a> API returns the necessary temporary credentials, including a required session token, using a JWT returned by Keycloak after authentication.</p>
<p>You can test this workflow using the following sequence of HTTP calls and the <code class="docutils literal notranslate"><span class="pre">curl</span></code> utility:</p>
<ol class="arabic">
<li><p>Authenticate as a Keycloak user and retrieve the JWT token</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://keycloak-url.example.net:8080/realms/REALM/protocol/openid-connect/token&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;username=USER&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;password=PASSWORD&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;grant_type=password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_id=CLIENT&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_secret=SECRET&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">USER</span></code> and <code class="docutils literal notranslate"><span class="pre">PASSWORD</span></code> with the credentials of a Keycloak user on the <code class="docutils literal notranslate"><span class="pre">REALM</span></code>.</p></li>
<li><p>Replace the <code class="docutils literal notranslate"><span class="pre">CLIENT</span></code> and <code class="docutils literal notranslate"><span class="pre">SECRET</span></code> with the client ID and secret for the MinIO-specific Keycloak client on the <code class="docutils literal notranslate"><span class="pre">REALM</span></code></p></li>
</ul>
<p>You can process the results using <code class="docutils literal notranslate"><span class="pre">jq</span></code> or a similar JSON-formatting utility.
Extract the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> field to retrieve the necessary access token.
Pay attention to the <code class="docutils literal notranslate"><span class="pre">expires_in</span></code> field to note the number of seconds before the token expires.</p>
</li>
<li><p>Generate MinIO Credentials using the <code class="docutils literal notranslate"><span class="pre">AssumeRoleWithWebIdentity</span></code> API</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;https://minio-url.example.net:9000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/x-www-form-urlencoded&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;Action=AssumeRoleWithWebIdentity&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;Version=2011-06-15&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;DurationSeconds=86000&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;WebIdentityToken=TOKEN&quot;</span>
</pre></div>
</div>
<p>Replace the <code class="docutils literal notranslate"><span class="pre">TOKEN</span></code> with the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> value returned by Keycloak.</p>
<p>The API returns an XML document on success containing the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.AccessKeyId</span></code> - the Access Key for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.SecretAccessKey</span></code> - the Secret Key for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.SessionToken</span></code> - the Session Token for the Keycloak User</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Credentials.Expiration</span></code> - the Expiration Date for the generated credentials</p></li>
</ul>
</li>
<li><p>Test the Credentials</p>
<p>Use your preferred S3-compatible SDK to connect to MinIO using the generated credentials.</p>
<p>For example, the following Python code using the MinIO <a class="reference internal" href="../../developers/python/minio-py.html#minio-python-quickstart"><span class="std std-ref">Python SDK</span></a> connects to the MinIO deployment and returns a list of buckets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">minio</span><span class="w"> </span><span class="kn">import</span> <span class="n">Minio</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">MinIO</span><span class="p">(</span>
   <span class="s2">&quot;minio-url.example.net:9000&quot;</span><span class="p">,</span>
   <span class="n">access_key</span> <span class="o">=</span> <span class="s2">&quot;ACCESS_KEY&quot;</span><span class="p">,</span>
   <span class="n">secret_key</span> <span class="o">=</span> <span class="s2">&quot;SECRET_KEY&quot;</span><span class="p">,</span>
   <span class="n">session_token</span> <span class="o">=</span> <span class="s2">&quot;SESSION_TOKEN&quot;</span>
   <span class="n">secure</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">list_buckets</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Next Steps</p>
<p>Applications should implement the <a class="reference internal" href="../../developers/security-token-service/AssumeRoleWithWebIdentity.html#minio-sts-assumerolewithwebidentity"><span class="std std-ref">STS AssumeRoleWithWebIdentity</span></a> flow using their <a class="reference internal" href="../../developers/minio-drivers.html#minio-drivers"><span class="std std-ref">SDK</span></a> of choice.
When STS credentials expire, applications should have logic in place to regenerate the JWT token, STS token, and MinIO credentials before retrying and continuing operations.</p>
<p>Alternatively, users can generate <a class="reference internal" href="../../administration/identity-access-management/minio-user-management.html#minio-id-access-keys"><span class="std std-ref">access keys</span></a> through the MinIO Console for the purpose of creating long-lived API-key like access using their Keycloak credentials.</p>
</li>
</ol>
</div>
</div>
</section>
<section id="enable-the-keycloak-admin-rest-api">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Enable the Keycloak Admin REST API</a><a class="headerlink" href="#enable-the-keycloak-admin-rest-api" title="Permalink to this heading"></a></h2>
<p>MinIO supports using the Keycloak Admin REST API for checking if an authenticated user exists <em>and</em> is enabled on the Keycloak realm.
This functionality allows MinIO to more quickly remove access from previously authenticated Keycloak users.
Without this functionality, the earliest point in time that MinIO could disable access for a disabled or removed user is when the last retrieved authentication token expires.</p>
<p>This procedure assumes an existing MinIO deployment configured with Keycloak as an external identity manager.</p>
<section id="create-the-necessary-client-scopes">
<h3>1) Create the Necessary Client Scopes<a class="headerlink" href="#create-the-necessary-client-scopes" title="Permalink to this heading"></a></h3>
<p>Navigate to the <span class="guilabel">Client scopes</span> view and create a new scope:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Name</span></p></th>
<td><p>Set to a recognizable name for the scope (<code class="docutils literal notranslate"><span class="pre">minio-admin-API-access</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Mappers</span></p></th>
<td><p>Select <span class="guilabel">Configure a new mapper</span></p></td>
</tr>
<tr class="row-odd"><th class="stub"><p><span class="guilabel">Audience</span></p></th>
<td><p>Set the <span class="guilabel">Name</span> to any recognizable name for the mapping (<code class="docutils literal notranslate"><span class="pre">minio-admin-api-access-mapper</span></code>)</p></td>
</tr>
<tr class="row-even"><th class="stub"><p><span class="guilabel">Included Client Audience</span></p></th>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">security-admin-console</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>Navigate to <span class="guilabel">Clients</span> and select the MinIO client</p>
<ol class="arabic simple">
<li><p>From <span class="guilabel">Service account roles</span>, select <span class="guilabel">Assign role</span> and assign the <code class="docutils literal notranslate"><span class="pre">admin</span></code> role</p></li>
<li><p>From <span class="guilabel">Client scopes</span>, select <span class="guilabel">Add client scope</span> and add the previously created scope</p></li>
</ol>
<p>Navigate to <span class="guilabel">Settings</span> and ensure <span class="guilabel">Authentication flow</span> includes <code class="docutils literal notranslate"><span class="pre">Service</span> <span class="pre">accounts</span> <span class="pre">roles</span></code>.</p>
</section>
<section id="validate-admin-api-access">
<h3>2) Validate Admin API Access<a class="headerlink" href="#validate-admin-api-access" title="Permalink to this heading"></a></h3>
<p>You can validate the functionality by using the Admin REST API with the MinIO client credentials to retrieve a bearer token and user data:</p>
<ol class="arabic">
<li><p>Retrieve the bearer token:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-d<span class="w"> </span><span class="s2">&quot;client_id=minio&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;client_secret=secretvalue&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>-d<span class="w"> </span><span class="s2">&quot;grant_type=password&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://keycloak-url:port/admin/realms/REALM/protocol/openid-connect/token
</pre></div>
</div>
</li>
<li><p>Use the value returned as the <code class="docutils literal notranslate"><span class="pre">access_token</span></code> to access the Admin API:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-H<span class="w"> </span><span class="s2">&quot;Authentication: Bearer ACCESS_TOKEN_VALUE&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">     </span>http://keycloak-url:port/admin/realms/REALM/users/UUID
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">UUID</span></code> with the unique ID for the user which you want to retrieve.
The response should resemble the following:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">   </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;954de141-781b-4eaf-81bf-bf3751cdc5f2&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;createdTimestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1675866684976</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;minio-user-1&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;totp&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;emailVerified&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;firstName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;lastName&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;attributes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;policy&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">         </span><span class="s2">&quot;readWrite&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">   </span><span class="p">},</span>
<span class="w">   </span><span class="nt">&quot;disableableCredentialTypes&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">   </span><span class="nt">&quot;requiredActions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">   </span><span class="nt">&quot;notBefore&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">   </span><span class="nt">&quot;access&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;manageGroupMembership&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;view&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;mapRoles&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;impersonate&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;manage&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>MinIO would revoke access for an authenticated user if the returned value has <code class="docutils literal notranslate"><span class="pre">enabled:</span> <span class="pre">false</span></code> or <code class="docutils literal notranslate"><span class="pre">null</span></code> (user was removed from Keycloak).</p>
</li>
</ol>
</section>
<section id="enable-keycloak-admin-support-on-minio">
<h3>3) Enable Keycloak Admin Support on MinIO<a class="headerlink" href="#enable-keycloak-admin-support-on-minio" title="Permalink to this heading"></a></h3>
<p>MinIO supports multiple methods for configuring Keycloak Admin API Support:</p>
<ul class="simple">
<li><p>Using a terminal/shell and the <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#command-mc.idp.openid" title="mc.idp.openid"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span></code></a> command</p></li>
<li><p>Using environment variables set prior to starting MinIO</p></li>
</ul>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-10" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-10">
CLI</label><div class="sd-tab-content docutils">
<p>You can use the <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#mc.idp.openid.update" title="mc.idp.openid.update"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span> <span class="pre">update</span></code></a> command to modify the configuration settings for an existing Keycloak service.
You can alternatively include the following configuration settings when setting up Keycloak for the first time.
The command takes all supported <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-open-id-config-settings"><span class="std std-ref">OpenID Configuration Settings</span></a>:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>idp<span class="w"> </span>openid<span class="w"> </span>update<span class="w"> </span>ALIAS<span class="w"> </span>KEYCLOAK_IDENTIFIER<span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">vendor</span><span class="o">=</span><span class="s2">&quot;keycloak&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">   </span><span class="nv">keycloak_admin_url</span><span class="o">=</span><span class="s2">&quot;https://keycloak-url:port/admin&quot;</span>
<span class="w">   </span><span class="nv">keycloak_realm</span><span class="o">=</span><span class="s2">&quot;REALM&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">KEYCLOAK_IDENTIFIER</span></code> with the name of the configured Keycloak IDP.
You can use <a class="reference internal" href="../../reference/minio-mc/mc-idp-openid.html#mc.idp.openid.ls" title="mc.idp.openid.ls"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">idp</span> <span class="pre">openid</span> <span class="pre">ls</span></code></a> to view all configured IDP configurations on the MinIO deployment</p></li>
<li><p>Specify the Keycloak admin URL in the <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#mc-conf.identity_openid.keycloak_admin_url" title="mc-conf.identity_openid.keycloak_admin_url"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">keycloak_admin_url</span></code></a> configuration setting</p></li>
<li><p>Specify the Keycloak Realm name in the <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#mc-conf.identity_openid.keycloak_realm" title="mc-conf.identity_openid.keycloak_realm"><code class="xref minio minio-mc-conf docutils literal notranslate"><span class="pre">keycloak_realm</span></code></a></p></li>
</ul>
</div>
<input id="sd-tab-item-11" name="sd-tab-set-5" type="radio">
</input><label class="sd-tab-label" for="sd-tab-item-11">
Environment Variables</label><div class="sd-tab-content docutils">
<p>Set the following <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#minio-server-envvar-external-identity-management-openid"><span class="std std-ref">environment variables</span></a> in the appropriate configuration location, such as <code class="docutils literal notranslate"><span class="pre">/etc/default/minio</span></code>.</p>
<p>The following example code sets the minimum required environment variables related to enabling the Keycloak Admin API for an existing Keycloak configuration.
Replace the suffix <code class="docutils literal notranslate"><span class="pre">_PRIMARY_IAM</span></code> with the unique identifier for the target Keycloak configuration.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">MINIO_IDENTITY_OPENID_VENDOR_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;keycloak&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_KEYCLOAK_ADMIN_URL_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;https://keycloak-url:port/admin&quot;</span>
<span class="nv">MINIO_IDENTITY_OPENID_KEYCLOAK_REALM_PRIMARY_IAM</span><span class="o">=</span><span class="s2">&quot;REALM&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Specify the Keycloak admin URL in the <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_KEYCLOAK_ADMIN_URL" title="envvar.MINIO_IDENTITY_OPENID_KEYCLOAK_ADMIN_URL"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_IDENTITY_OPENID_KEYCLOAK_ADMIN_URL</span></code></a></p></li>
<li><p>Specify the Keycloak Realm name in the <a class="reference internal" href="../../reference/minio-server/settings/iam/openid.html#envvar.MINIO_IDENTITY_OPENID_KEYCLOAK_REALM" title="envvar.MINIO_IDENTITY_OPENID_KEYCLOAK_REALM"><code class="xref minio minio-envvar docutils literal notranslate"><span class="pre">MINIO_IDENTITY_OPENID_KEYCLOAK_REALM</span></code></a></p></li>
</ul>
</div>
</div>
</section>
</section>
</section>


            </div><div class="footer">
   This work is licensed under a
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License.</a>
   2020-Present, MinIO, Inc. 
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img height="10" alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
   </a>
</div>
         </div>
      </div>
   </section><div id="cookie">
    <div class="container">
        <div class="cookie__text">
            <strong>Your privacy is important to us:</strong>
            We use cookies in order to give you a better experience. If you wish so, you can always review our 
            <a target="_blank" rel="noreferrer noopener" href="https://min.io/privacy-policy">Privacy Policy</a>.
        </div>

        <button type="button" id="cookie__btn">Accept</button>
    </div>
</div><script>
    // Dark mode and read mode detection

    // Dark mode
    /*var isDarkMode = localStorage.getItem("dark-mode");
    var dmToggleBtn = document.getElementById("dark-mode-toggle");
    if (isDarkMode === "true") {
       document.documentElement.classList.add("dark-mode");
       dmToggleBtn.classList.add("active");
    }

    // Read mode
    var isReadMode = localStorage.getItem("read-mode");
    var rmToggleBtn = document.getElementById("read-mode-toggle");

    if (isReadMode === "true") {
        document.documentElement.classList.add("read-mode");
        rmToggleBtn.classList.add("active");
    }*/
 </script>
  </body>
</html>
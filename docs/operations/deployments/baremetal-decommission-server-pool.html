

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Decommission Server Pools &#8212; MinIO Object Storage (AGPLv3)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/main.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
    <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/instantsearch.js@4"></script>
    <script defer="defer" src="../../_static/js/main.js"></script>
    <script defer="defer" src="../../_static/js/instantSearch.js"></script>
    <link rel="canonical" href="https://docs.min.io/community/minio-object-store/operations/deployments/baremetal-decommission-server-pool.html" />
    <link rel="icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Migrate from Gateway or Filesystem Mode" href="baremetal-migrate-fs-gateway.html" />
    <link rel="prev" title="Expand a Distributed MinIO Deployment" href="baremetal-expand-minio-deployment.html" /><meta name="pagename" content="operations/deployments/baremetal-decommission-server-pool"/>

<!-- Preload fonts and scripts -->
<link rel="preload" href="../../_static/fonts/inter/Inter-Regular.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Medium.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="../../_static/fonts/inter/Inter-Bold.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preconnect" href="https://E1CSOK3UC2-dsn.algolia.net" crossorigin />

<!-- Google Tag Manager: docs.min.io -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-56L9FLVL');</script>

<!-- Google Tag Manager: main -->
<script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TWQNHTD');
</script>

<!-- Google Analytics -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-56860620-1', 'auto');
    ga('send', 'pageview');
</script>

<!-- Linkedin -->
<script>
    _linkedin_partner_id = "1153348";
    window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
    window._linkedin_data_partner_ids.push(_linkedin_partner_id);

    (function(l) {
    if (!l){window.lintrk = function(a,b){window.lintrk.q.push([a,b])};
    window.lintrk.q=[]}
    var s = document.getElementsByTagName("script")[0];
    var b = document.createElement("script");
    b.type = "text/javascript";b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);})(window.lintrk);
</script>

<!-- Leadfeeder -->
<script>
    (function(){
        window.ldfdr = window.ldfdr || {};
        (function(d, s, ss, fs){
        fs = d.getElementsByTagName(s)[0];
        function ce(src){
            var cs  = d.createElement(s);
            cs.src = src;
            setTimeout(function(){fs.parentNode.insertBefore(cs,fs)}, 1);
        }
        ce(ss);
        })(document, 'script', 'https://sc.lfeeder.com/lftracker_v1_DzLR5a5kKJA7BoQ2.js');
    })();
</script>
   
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  


  </head><body><!-- Google Tag Manager: docs.min.io (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-56L9FLVL" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><header class="header inactive">
   <div class="container">
      <div class="header__inner">
         <a href="https://min.io?jmp=docs-minio-object-store" class="header__logo">
            <svg viewBox="0 0 162.612 24.465">
               <path d="M52.751.414h9.108v23.63h-9.108zM41.711.74l-18.488 9.92a.919.919 0 0 1-.856 0L3.879.74A2.808 2.808 0 0 0 2.558.414h-.023A2.4 2.4 0 0 0 0 2.641v21.376h9.1V13.842a.918.918 0 0 1 1.385-.682l10.361 5.568a3.634 3.634 0 0 0 3.336.028l10.933-5.634a.917.917 0 0 1 1.371.69v10.205h9.1V2.641A2.4 2.4 0 0 0 43.055.414h-.023a2.808 2.808 0 0 0-1.321.326zm65.564-.326h-9.237v10.755a.913.913 0 0 1-1.338.706L72.762.675a2.824 2.824 0 0 0-1.191-.261h-.016a2.4 2.4 0 0 0-2.535 2.227v21.377h9.163V13.275a.914.914 0 0 1 1.337-.707l24.032 11.2a2.813 2.813 0 0 0 1.188.26 2.4 2.4 0 0 0 2.535-2.227zm7.161 23.63V.414h4.191v23.63zm28.856.421c-11.274 0-19.272-4.7-19.272-12.232C124.02 4.741 132.066 0 143.292 0s19.32 4.7 19.32 12.233-7.902 12.232-19.32 12.232zm0-21.333c-8.383 0-14.84 3.217-14.84 9.1 0 5.926 6.457 9.1 14.84 9.1s14.887-3.174 14.887-9.1c0-5.883-6.504-9.1-14.887-9.1z" />
            </svg>
         </a>
         
         <!--
         <div class="header__actions">
            

            <button id="dark-mode-toggle" type="button" class="icon icon--switch"><svg width="21" height="21" viewBox="0 0 48 48" fill="currentColor">
    <path d="M24 42q-7.5 0-12.75-5.25T6 24q0-6.75 3.975-11.45Q13.95 7.85 20.4 6.5q2.05-.4 2.8.7t-.05 3q-.45 1.15-.7 2.35-.25 1.2-.25 2.45 0 4.5 3.15 7.65Q28.5 25.8 33 25.8q1.25 0 2.425-.225 1.175-.225 2.275-.625 2.15-.8 3.2.075 1.05.875.55 2.975-1.35 6.05-6.05 10.025Q30.7 42 24 42Zm0-3q5.45 0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75 0-9.775-4.025T19.2 15q0-1.2.25-2.575.25-1.375.9-3.125-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39Zm-.2-14.85Z" />
</svg><svg width="17" height="17" viewBox="0 0 17 17">
    <path d="M8.5 2.898c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415V.58c0-.167.055-.306.164-.415S8.333 0 8.5 0s.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415s-.248.164-.415.164zm3.96 1.642c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.217-1.236c.116-.116.254-.174.415-.174s.299.058.415.174.174.251.174.406-.058.29-.174.406L13.272 4.54c-.116.116-.251.174-.406.174s-.29-.058-.406-.174zm2.222 4.54c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164S17 8.333 17 8.5s-.055.306-.164.415-.248.164-.415.164h-1.739zM8.5 17c-.167 0-.306-.055-.415-.164s-.164-.248-.164-.415v-1.739c0-.167.055-.306.164-.415s.248-.164.415-.164.306.055.415.164.164.248.164.415v1.739c0 .167-.055.306-.164.415S8.667 17 8.5 17zM3.728 4.54L2.492 3.323c-.116-.116-.174-.254-.174-.415s.058-.299.174-.415.251-.174.406-.174.29.058.406.174L4.54 3.728c.116.116.174.251.174.406s-.058.29-.174.406c-.116.103-.254.155-.415.155s-.293-.052-.396-.155zm9.968 9.968l-1.236-1.236c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406c.103-.103.235-.155.396-.155s.299.052.415.155l1.256 1.217c.116.116.171.254.164.415s-.061.299-.164.415c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM.58 9.08c-.167 0-.306-.055-.415-.164S0 8.667 0 8.5s.055-.306.164-.415.248-.164.415-.164h1.739c.167 0 .306.055.415.164s.164.248.164.415-.055.306-.164.415-.248.164-.415.164H.58zm1.912 5.428c-.116-.116-.174-.251-.174-.406s.058-.29.174-.406l1.236-1.236c.103-.103.235-.155.396-.155s.299.052.415.155c.116.116.174.254.174.415s-.058.299-.174.415l-1.217 1.217c-.116.116-.254.174-.415.174s-.299-.058-.415-.174h0zM8.5 13.136a4.47 4.47 0 0 1-3.284-1.352A4.47 4.47 0 0 1 3.864 8.5a4.47 4.47 0 0 1 1.352-3.284A4.47 4.47 0 0 1 8.5 3.864a4.47 4.47 0 0 1 3.284 1.352A4.47 4.47 0 0 1 13.136 8.5a4.47 4.47 0 0 1-1.352 3.284A4.47 4.47 0 0 1 8.5 13.136zm0-1.159a3.35 3.35 0 0 0 2.463-1.014A3.35 3.35 0 0 0 11.977 8.5a3.35 3.35 0 0 0-1.014-2.463A3.35 3.35 0 0 0 8.5 5.023a3.35 3.35 0 0 0-2.463 1.014A3.35 3.35 0 0 0 5.023 8.5a3.35 3.35 0 0 0 1.014 2.463A3.35 3.35 0 0 0 8.5 11.977z" fill="currentColor" />
</svg>
               Dark Mode
            </button>
         </div>
         -->
      </div>
  
      <h2 class="header__title hidden-rm">Documentation</h2>

      

      <!--<div class="platform-nav">
    <div class="platform-nav__main">
        <div class="container">
        </div>
        <button type="button" class="icon search-toggle search-toggle--keyboard visible-rm"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg>
            Search
        </button>
    </div>
</div> -->
         <div id="search">
            <div class="search__inner">
               <div id="search-box"></div>
               
               <div class="search__dropdown">
                  <div id="search-filters"></div>
                  <div id="search-clear"></div>
                  <div id="search-results"></div>
                  <div id="search-powered-by"></div>
               </div>
            </div>
         </div>
   </div>
 </header>
   <section class="content">
      <div class="container">
         <div class="sidebar inactive scrollbar">
            <div class="hide-aside visible-rm">
               <button type="button" class="icon"><svg width="12" height="12">
    <path d="M11.253 1.691L10.125.563 5.653 5.035 1.181.563.053 1.691l4.472 4.472-4.472 4.472 1.128 1.128 4.472-4.472 4.472 4.472 1.128-1.128-4.472-4.472z" fill-rule="evenodd"/>
</svg>
                     Close Doc Navigation
               </button>
            </div>

            <a class="sidebar__title" href="../../index.html">MinIO Object Storage</a>
            
            
      <nav
         class="docs"
         role="navigation"
      >
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="installation.html">Installation and Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="kubernetes.html">Deploy MinIO on Kubernetes</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="baremetal.html">Deploy MinIO on Baremetal</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="baremetal-deploy-minio-server.html">Install the MinIO Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="baremetal-upgrade-minio-deployment.html">Upgrade a MinIO Deployment</a></li>
<li class="toctree-l3"><a class="reference internal" href="baremetal-expand-minio-deployment.html">Expand a Distributed MinIO Deployment</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Decommission Server Pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="baremetal-migrate-fs-gateway.html">Migrate from Gateway or Filesystem Mode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../replication/multi-site-replication.html">Site Replication Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts.html">Core Operational Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../monitoring.html">Monitoring and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../external-iam.html">External Identity Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-side-encryption.html">Data Encryption (SSE)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../network-encryption.html">Network Encryption (TLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../checklists.html">Deployment Checklists</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-recovery.html">Recover after Hardware Failure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/minio-console.html">MinIO Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/object-management.html">Object Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/monitoring.html">Monitoring Bucket and Object Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/identity-access-management.html">Identity and Access Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/server-side-encryption.html">Server-Side Encryption of Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/bucket-replication.html">Bucket Replication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/batch-framework.html">Batch Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/concepts.html">Core Administration Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/minio-drivers.html">Software Development Kits (SDK)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/security-token-service.html">Security Token Service (STS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/transforms-with-object-lambda.html">Transforms with Object Lambda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developers/file-transfer-protocol.html">File Transfer Protocol (FTP/SFTP)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/kubernetes.html">Kubernetes Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/baremetal.html">Baremetal Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/s3-api-compatibility.html">S3 API Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../integrations/integrations.html">Integrations</a></li>
</ul>

      </nav>
         </div><div class="content__toc scrollbar scrollbar--hover">
  	<button data-aside-toggle="doc" class="icon" type="button"><svg width="17" height="13" viewbox="0 0 17 13">
    <path d="M16.034 0H.966C.433 0 0 .346 0 .773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773S16.567 0 16.034 0zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773zm0 5.409H.966c-.533 0-.966.346-.966.773s.433.773.966.773h15.068c.533 0 .966-.346.966-.773s-.433-.773-.966-.773z" />
</svg> TOC Menu
  	</button>

  	<div id="content-toc"></div>
		<button class="icon search-toggle" type="button"><svg width="14" height="15">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M11.5 6.5a5 5 0 1 1-10 0 5 5 0 0 1 10 0Zm-1.59 5.535a6.5 6.5 0 1 1 1.179-.931l1.845 2.096a.75.75 0 0 1-1.127.99L9.91 12.036Z"/>
</svg> Search
		</button>
</div>

         <div class="content__main">
            <div class="content__body">
               
  <section id="decommission-server-pools">
<span id="minio-decommissioning"></span><h1>Decommission Server Pools<a class="headerlink" href="#decommission-server-pools" title="Permalink to this heading"></a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#prerequisites" id="id6">Prerequisites</a></p></li>
<li><p><a class="reference internal" href="#considerations" id="id7">Considerations</a></p></li>
<li><p><a class="reference internal" href="#behavior" id="id8">Behavior</a></p></li>
<li><p><a class="reference internal" href="#decommission-a-server-pool" id="id9">Decommission a Server Pool</a></p></li>
<li><p><a class="reference internal" href="#decommission-multiple-server-pools" id="id10">Decommission Multiple Server Pools</a></p></li>
</ul>
</nav>
<p>MinIO supports decommissioning and removing <a class="reference internal" href="../concepts.html#minio-intro-server-pool"><span class="std std-ref">server pools</span></a> from a deployment with two or more pools.
To decommission, there must be at least one remaining pool with sufficient available space to receive the objects from the decommissioned pools.</p>
<p>Starting with <code class="docutils literal notranslate"><span class="pre">RELEASE.2023-01-18T04-36-38Z</span></code>, MinIO supports queueing  <a class="reference internal" href="#minio-decommission-multiple-pools"><span class="std std-ref">multiple pools</span></a> in a single decommission command.
Each listed pool immediately enters a read-only status, but draining occurs one pool at a time.</p>
<p>Decommissioning is designed for removing an older server pool whose hardware is no longer sufficient or performant compared to the pools in the deployment.
MinIO automatically migrates data from the decommissioned pools to the remaining pools in the deployment based on the ratio of free space available in each pool.</p>
<p>During the decommissioning process, MinIO routes read operations (e.g. <code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">LIST</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>) normally.
MinIO routes write operations (e.g. <code class="docutils literal notranslate"><span class="pre">PUT</span></code>, versioned <code class="docutils literal notranslate"><span class="pre">DELETE</span></code>) to the remaining “active” pools in the deployment.
Versioned objects maintain their ordering throughout the migration process.</p>
<p>The procedures on this page decommission and remove one or more server pools from a <a class="reference internal" href="installation.html#deploy-minio-distributed"><span class="std std-ref">distributed</span></a> MinIO deployment with <em>at least</em> two server pools.</p>
<div class="important admonition">
<p class="admonition-title">Decommissioning is Permanent</p>
<p>Once MinIO begins decommissioning a pool, it marks that pool as <em>permanently</em> inactive (“draining”).
Cancelling or otherwise interrupting the  decommissioning procedure does <strong>not</strong> restore the pool to an active state.
Use extra caution when decommissioning multiple pools.</p>
<p>Decommissioning is a major administrative operation that requires care in planning and execution, and is not a trivial or ‘daily’ task.</p>
<p><a class="reference external" href="https://min.io/pricing?jmp=docs">MinIO SUBNET</a> users can <a class="reference external" href="https://subnet.min.io/">log in</a> and create a new issue related to decommissioning.
Coordination with MinIO Engineering via SUBNET can ensure successful decommissioning, including performance testing and health diagnostics.</p>
<p>Community users can seek support on the <a class="reference external" href="https://slack.min.io">MinIO Community Slack</a>.
Community Support is best-effort only and has no SLAs around responsiveness.</p>
</div>
<section id="prerequisites">
<span id="minio-decommissioning-prereqs"></span><h2><a class="toc-backref" href="#id6" role="doc-backlink">Prerequisites</a><a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h2>
<section id="back-up-cluster-settings-first">
<h3>Back Up Cluster Settings First<a class="headerlink" href="#back-up-cluster-settings-first" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-cluster-bucket-export.html#command-mc.admin.cluster.bucket.export" title="mc.admin.cluster.bucket.export"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">cluster</span> <span class="pre">bucket</span> <span class="pre">export</span></code></a> and <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-cluster-iam-export.html#command-mc.admin.cluster.iam.export" title="mc.admin.cluster.iam.export"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">cluster</span> <span class="pre">iam</span> <span class="pre">export</span></code></a> commands to take a snapshot of the bucket metadata and IAM configurations respectively prior to starting decommissioning.
You can use these snapshots to restore bucket/IAM settings to recover from user or process errors as necessary.</p>
</section>
<section id="networking-and-firewalls">
<h3>Networking and Firewalls<a class="headerlink" href="#networking-and-firewalls" title="Permalink to this heading"></a></h3>
<p>Each node should have full bidirectional network access to every other node in
the deployment. For containerized or orchestrated infrastructures, this may
require specific configuration of networking and routing components such as
ingress or load balancers. Certain operating systems may also require setting
firewall rules. For example, the following command explicitly opens the default
MinIO server API port <code class="docutils literal notranslate"><span class="pre">9000</span></code> on servers using <code class="docutils literal notranslate"><span class="pre">firewalld</span></code>:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>firewall-cmd<span class="w"> </span>--permanent<span class="w"> </span>--zone<span class="o">=</span>public<span class="w"> </span>--add-port<span class="o">=</span><span class="m">9000</span>/tcp
firewall-cmd<span class="w"> </span>--reload
</pre></div>
</div>
<p>If you set a static <a class="reference internal" href="../../administration/minio-console.html#minio-console"><span class="std std-ref">MinIO Console</span></a> port (e.g. <code class="docutils literal notranslate"><span class="pre">:9001</span></code>)
you must <em>also</em> grant access to that port to ensure connectivity from external
clients.</p>
<p>MinIO <strong>strongly recomends</strong> using a load balancer to manage connectivity to the
cluster. The Load Balancer should use a “Least Connections” algorithm for
routing requests to the MinIO deployment, since any MinIO node in the deployment
can receive, route, or process client requests.</p>
<p>The following load balancers are known to work well with MinIO:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.nginx.com/products/nginx/load-balancing/">NGINX</a></p></li>
<li><p><a class="reference external" href="https://cbonte.github.io/haproxy-dconv/2.3/intro.html#3.3.5">HAProxy</a></p></li>
</ul>
<p>Configuring firewalls or load balancers to support MinIO is out of scope for
this procedure.</p>
</section>
<section id="deployment-must-have-sufficient-storage">
<h3>Deployment Must Have Sufficient Storage<a class="headerlink" href="#deployment-must-have-sufficient-storage" title="Permalink to this heading"></a></h3>
<p>The decommissioning process migrates objects from the target pool to other pools in the deployment.
The total available storage on the deployment <em>must</em> exceed the total storage of the decommissioned pool.</p>
<p>Use the <a class="reference external" href="https://min.io/product/erasure-code-calculator">Erasure Code Calculator</a> to determine the usable storage capacity.
Then reduce that by the size of the objects already on the deployment.</p>
<p>For example, consider a deployment with the following distribution of used and free storage:</p>
<table class="docutils align-default" style="width: 100%">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 33.3%" />
<col style="width: 33.3%" />
</colgroup>
<tbody>
<tr class="row-odd"><th class="stub"><p>Pool 1</p></th>
<td><p>100TB Used</p></td>
<td><p>200TB Total</p></td>
</tr>
<tr class="row-even"><th class="stub"><p>Pool 2</p></th>
<td><p>100TB Used</p></td>
<td><p>200TB Total</p></td>
</tr>
<tr class="row-odd"><th class="stub"><p>Pool 3</p></th>
<td><p>100TB Used</p></td>
<td><p>200TB Total</p></td>
</tr>
</tbody>
</table>
<p>Decommissioning Pool 1 requires distributing the 100TB of used storage across the remaining pools.
Pool 2 and Pool 3 each have 100TB of unused storage space and can safely absorb the data stored on Pool 1.</p>
<p>However, if Pool 1 were full (e.g. 200TB of used space), decommissioning would
completely fill the remaining pools and potentially prevent any further write
operations.</p>
</section>
</section>
<section id="considerations">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Considerations</a><a class="headerlink" href="#considerations" title="Permalink to this heading"></a></h2>
<section id="replacing-a-server-pool">
<h3>Replacing a Server Pool<a class="headerlink" href="#replacing-a-server-pool" title="Permalink to this heading"></a></h3>
<p>For hardware upgrade cycles where you replace old pool hardware with a new pool, you should <a class="reference internal" href="baremetal-expand-minio-deployment.html#expand-minio-distributed"><span class="std std-ref">add the new pool through expansion</span></a> before starting the decommissioning of the old pool.
Adding the new pool first allows the decommission process to transfer objects in a balanced way across all available pools, both existing and new.</p>
<p>Complete any planned <a class="reference internal" href="baremetal-expand-minio-deployment.html#expand-minio-distributed"><span class="std std-ref">hardware expansion</span></a> prior to decommissioning older hardware pools.</p>
<p>Decommissioning requires that a cluster’s topology remain stable throughout the pool draining process.
Do <strong>not</strong> attempt to perform expansion and decommission changes in a single step.</p>
</section>
<section id="decommissioning-is-resumable">
<h3>Decommissioning is Resumable<a class="headerlink" href="#decommissioning-is-resumable" title="Permalink to this heading"></a></h3>
<p>MinIO resumes decommissioning if interrupted by transient issues such as
deployment restarts or network failures.</p>
<p>For manually cancelled or failed decommissioning attempts, MinIO
resumes only after you manually re-initiate the decommissioning operation.</p>
<p>The pool remains in the decommissioning state <em>regardless</em> of the interruption.
A pool can <em>never</em> return to active status after decommissioning begins.</p>
</section>
<section id="decommissioning-is-non-disruptive">
<h3>Decommissioning is Non-Disruptive<a class="headerlink" href="#decommissioning-is-non-disruptive" title="Permalink to this heading"></a></h3>
<p>Removing a decommissioned server pool requires restarting <em>all</em> MinIO
nodes in the deployment at around the same time.</p>
<p>MinIO strongly recommends restarting all MinIO Server processes in a deployment simultaneously.
MinIO operations are atomic and strictly consistent.
As such the restart procedure is non-disruptive to applications and ongoing operations.</p>
<p>Do <strong>not</strong> perform “rolling” (e.g. one node at a time) restarts.</p>
</section>
<section id="decommissioning-ignores-expired-objects-and-trailing-deletemarker">
<h3>Decommissioning Ignores Expired Objects and Trailing <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code><a class="headerlink" href="#decommissioning-ignores-expired-objects-and-trailing-deletemarker" title="Permalink to this heading"></a></h3>
<p>Starting with <a class="reference external" href="https://github.com/minio/minio/releases/tag/RELEASE.2023-05-27T05-56-19Z">RELEASE.2023-05-27T05-56-19Z</a>, decommissioning ignores objects where the only remaining version is a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>.
This avoids creating empty metadata on the remaining server pool(s) for objects that are effectively fully deleted.</p>
<p>Starting with <a class="reference external" href="https://github.com/minio/minio/releases/tag/RELEASE.2023-06-23T20-26-00Z">RELEASE.2023-06-23T20-26-00Z</a>, decommissioning also ignores object versions which have expired based on the configured <a class="reference internal" href="../../administration/object-management/object-lifecycle-management.html#minio-lifecycle-management-expiration"><span class="std std-ref">lifecycle rules</span></a> for the parent bucket.
Starting with <a class="reference external" href="https://github.com/minio/minio/releases/tag/RELEASE.2023-06-29T05-12-28Z">RELEASE.2023-06-29T05-12-28Z</a>, you can monitor ignored delete markers and expired objects during the decommission process with <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-trace.html#mc.admin.trace.-call" title="mc.admin.trace.--call"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">trace</span> <span class="pre">--call</span> <span class="pre">decommission</span></code></a>.</p>
<p>Once the decommissioning process completes, you can safely shut down that pool.
Since the only remaining data was scheduled for deletion <em>or</em> was only a <code class="docutils literal notranslate"><span class="pre">DeleteMarker</span></code>, you can safely clear or destroy those drives as per your internal procedures.</p>
</section>
</section>
<section id="behavior">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Behavior</a><a class="headerlink" href="#behavior" title="Permalink to this heading"></a></h2>
<section id="final-listing-check">
<h3>Final Listing Check<a class="headerlink" href="#final-listing-check" title="Permalink to this heading"></a></h3>
<p>At the end of the decommission process, MinIO checks for a list of items on the pool.
If the list returns empty, MinIO marks the decommission as successfully completed.
If any objects return, MinIO returns an error that the decommission process failed.</p>
<p>If the decommission fails, customers should open a <a class="reference external" href="https://min.io/pricing?jmp=docs">MinIO SUBNET</a> issue for further assistance before retrying the decommission.
Community users without a SUBNET subscription can retry the decommission process or seek additional support through the <a class="reference external" href="https://slack.min.io/">MinIO Community Slack</a>.
MinIO provides Community Support at best-effort only and provides no <abbr title="Service Level Agreement">SLA</abbr> around responsiveness.</p>
</section>
<section id="decommissioning-a-server-with-tiering-enabled">
<h3>Decommissioning a Server with Tiering Enabled<a class="headerlink" href="#decommissioning-a-server-with-tiering-enabled" title="Permalink to this heading"></a></h3>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version RELEASE.2023-03-20T20-16-18Z.</span></p>
</div>
<p>For deployments with tiering enabled and active, decommissioning moves the object references to a new active pool.
Applications can continue issuing GET requests against those objects where MinIO handles transparently retrieving them from the remote tier.</p>
<p>In older MinIO versions, tiering configurations prevent decommissioning.</p>
</section>
</section>
<section id="decommission-a-server-pool">
<span id="minio-decommissioning-server-pool"></span><h2><a class="toc-backref" href="#id9" role="doc-backlink">Decommission a Server Pool</a><a class="headerlink" href="#decommission-a-server-pool" title="Permalink to this heading"></a></h2>
<section id="review-the-minio-deployment-topology">
<h3>1) Review the MinIO Deployment Topology<a class="headerlink" href="#review-the-minio-deployment-topology" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#command-mc.admin.decommission" title="mc.admin.decommission"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span></code></a> command returns a list of all
pools in the MinIO deployment:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>┌─────┬────────────────────────────────────────────────────────────────┬──────────────────────────────────┬────────┐
│<span class="w"> </span>ID<span class="w">  </span>│<span class="w"> </span>Pools<span class="w">                                                          </span>│<span class="w"> </span>Capacity<span class="w">                         </span>│<span class="w"> </span>Status<span class="w"> </span>│
│<span class="w"> </span>1st<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">10</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">10</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
│<span class="w"> </span>2nd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">05</span>...08<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">60</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
│<span class="w"> </span>3rd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">09</span>...12<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">40</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
└─────┴────────────────────────────────────────────────────────────────┴──────────────────────────────────┴────────┘
</pre></div>
</div>
<p>The example deployment above has three pools. Each pool has four servers
with four drives each.</p>
<p>Identify the target pool for decommissioning and review the current capacity.
The remaining pools in the deployment <em>must</em> have sufficient total
capacity to migrate all object stored in the decommissioned pool.</p>
<p>In the example above, the deployment has 210TiB total storage with 110TiB used.
The first pool (<code class="docutils literal notranslate"><span class="pre">minio-{01...04}</span></code>) is the decommissioning target, as it was
provisioned when the MinIO deployment was created and is completely full. The
remaining newer pools can absorb all objects stored on the first pool without
significantly impacting total available storage.</p>
</section>
<section id="start-the-decommissioning-process">
<h3>2) Start the Decommissioning Process<a class="headerlink" href="#start-the-decommissioning-process" title="Permalink to this heading"></a></h3>
<div class="warning admonition">
<p class="admonition-title">Decommissioning is Permanent</p>
<p>Once MinIO begins decommissioning a pool, it marks that pool as <em>permanently</em>
inactive (“draining”). Cancelling or otherwise interrupting the
decommissioning procedure does <strong>not</strong> restore the pool to an active
state.</p>
<p>Review and validate that you are decommissioning the correct pool
<em>before</em> running the following command.</p>
</div>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.start" title="mc.admin.decommission.start"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">start</span></code></a> command to begin decommissioning
the target pool. Specify the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment and the
full description of the pool to decommission, including all hosts, disks, and file paths.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>start<span class="w"> </span>myminio/<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.net:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio
</pre></div>
</div>
<p>The example command begins decommissioning the matching server pool on the
<code class="docutils literal notranslate"><span class="pre">myminio</span></code> deployment.</p>
<p>During the decommissioning process, MinIO continues routing read operations
(<code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">LIST</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>) to the pool for those objects not
yet migrated. MinIO routes all new write operations (<code class="docutils literal notranslate"><span class="pre">PUT</span></code>) to the
remaining pools in the deployment.</p>
<p>Load balancers, reverse proxy, or other network control components which
manage connections to the deployment do not need to modify their configurations
at this time.</p>
</section>
<section id="monitor-the-decommissioning-process">
<h3>3) Monitor the Decommissioning Process<a class="headerlink" href="#monitor-the-decommissioning-process" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.status" title="mc.admin.decommission.status"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">status</span></code></a> command to monitor the
decommissioning process.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>┌─────┬────────────────────────────────────────────────────────────────┬──────────────────────────────────┬──────────┐
│<span class="w"> </span>ID<span class="w">  </span>│<span class="w"> </span>Pools<span class="w">                                                          </span>│<span class="w"> </span>Capacity<span class="w">                         </span>│<span class="w"> </span>Status<span class="w">   </span>│
│<span class="w"> </span>1st<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">10</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">10</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Draining<span class="w"> </span>│
│<span class="w"> </span>2nd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">05</span>...08<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">60</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w">   </span>│
│<span class="w"> </span>3rd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">09</span>...12<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">40</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w">   </span>│
└─────┴────────────────────────────────────────────────────────────────┴──────────────────────────────────┴──────────┘
</pre></div>
</div>
<p>You can retrieve more detailed information by specifying the description of
the server pool to the command:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Decommissioning<span class="w"> </span>rate<span class="w"> </span>at<span class="w"> </span>100MiB/sec<span class="w"> </span><span class="o">[</span>1TiB/10TiB<span class="o">]</span>
Started:<span class="w"> </span><span class="m">30</span><span class="w"> </span>minutes<span class="w"> </span>ago
</pre></div>
</div>
<p><a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.status" title="mc.admin.decommission.status"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">status</span></code></a> marks the <span class="guilabel">Status</span> as
<span class="guilabel">Complete</span> once decommissioning is completed. You can move on to
the next step once decommissioning is completed.</p>
<p>If <span class="guilabel">Status</span> reads as failed, you can re-run the
<a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.start" title="mc.admin.decommission.start"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">start</span></code></a> command to resume the process.
For persistent failures, use <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-logs.html#command-mc.admin.logs" title="mc.admin.logs"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">logs</span></code></a> or review
the <code class="docutils literal notranslate"><span class="pre">systemd</span></code> logs (e.g. <code class="docutils literal notranslate"><span class="pre">journalctl</span> <span class="pre">-u</span> <span class="pre">minio</span></code>) to identify more specific
errors.</p>
</section>
<section id="remove-the-decommissioned-pool-from-the-deployment-configuration">
<h3>4) Remove the Decommissioned Pool from the Deployment Configuration<a class="headerlink" href="#remove-the-decommissioned-pool-from-the-deployment-configuration" title="Permalink to this heading"></a></h3>
<p>As each pool completes decommissioning, you can safely remove it from the
deployment configuration. Modify the startup command for each remaining MinIO
server in the deployment and remove the decommissioned pool.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.deb</span></code> or <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> packages install a
<a class="reference external" href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> service file to
<code class="docutils literal notranslate"><span class="pre">/lib/systemd/system/minio.service</span></code>. For binary installations, this
procedure assumes the file was created manually as per the
<a class="reference internal" href="installation.html#deploy-minio-distributed"><span class="std std-ref">Installation and Management</span></a> procedure.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">minio.service</span></code> file uses an environment file located at
<code class="docutils literal notranslate"><span class="pre">/etc/default/minio</span></code> for sourcing configuration settings, including the
startup. Specifically, the <code class="docutils literal notranslate"><span class="pre">MINIO_VOLUMES</span></code> variable sets the startup
command:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>/etc/default/minio<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;MINIO_VOLUMES&quot;</span>
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">MINIO_VOLUMES</span><span class="o">=</span><span class="s2">&quot;https://minio-{1...4}.example.net:9000/mnt/disk{1...4}/minio https://minio-{5...8}.example.net:9000/mnt/disk{1...4}/minio https://minio-{9...12}.example.net:9000/mnt/disk{1...4}/minio&quot;</span>
</pre></div>
</div>
<p>Edit the environment file and remove the decommissioned pool from the
<code class="docutils literal notranslate"><span class="pre">MINIO_VOLUMES</span></code> value.</p>
</section>
<section id="update-network-control-plane">
<h3>5) Update Network Control Plane<a class="headerlink" href="#update-network-control-plane" title="Permalink to this heading"></a></h3>
<p>Update any load balancers, reverse proxies, or other network control planes
to remove the decommissioned server pool from the connection configuration for
the MinIO deployment.</p>
<p>Specific instructions for configuring network control plane components is
out of scope for this procedure.</p>
</section>
<section id="restart-the-minio-deployment">
<h3>6) Restart the MinIO Deployment<a class="headerlink" href="#restart-the-minio-deployment" title="Permalink to this heading"></a></h3>
<p>Issue the following commands on each node <strong>simultaneously</strong> in the deployment
to restart the MinIO service:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>minio.service
</pre></div>
</div>
<p>Use the following commands to confirm the service is online and functional:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>minio.service
journalctl<span class="w"> </span>-f<span class="w"> </span>-u<span class="w"> </span>minio.service
</pre></div>
</div>
<p>MinIO may log an increased number of non-critical warnings while the
server processes connect and synchronize. These warnings are typically
transient and should resolve as the deployment comes online.</p>
<p>MinIO strongly recommends restarting all MinIO Server processes in a deployment simultaneously.
MinIO operations are atomic and strictly consistent.
As such the restart procedure is non-disruptive to applications and ongoing operations.</p>
<p>Do <strong>not</strong> perform “rolling” (e.g. one node at a time) restarts.</p>
<p>Once the deployment is online, use <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-info.html#command-mc.admin.info" title="mc.admin.info"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">info</span></code></a> to confirm the
uptime of all remaining servers in the deployment.</p>
</section>
</section>
<section id="decommission-multiple-server-pools">
<span id="minio-decommission-multiple-pools"></span><h2><a class="toc-backref" href="#id10" role="doc-backlink">Decommission Multiple Server Pools</a><a class="headerlink" href="#decommission-multiple-server-pools" title="Permalink to this heading"></a></h2>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version RELEASE.2023-01-18T04-36-38Z.</span></p>
</div>
<p>You can start the decommission process for multiple server pools when issuing a decommission command.</p>
<p>After entering the command:</p>
<ul class="simple">
<li><p>MinIO immediately stops write access to all pools to be decommissioned.</p></li>
<li><p>Decommissioning happens one pool at a time.</p></li>
<li><p>Each pool completes the decommission draining process before MinIO begins draining the next pool.</p></li>
</ul>
<p>To decommission multiple server pools from one command, add the full description of each server pool to decommission as a comma-separated list.</p>
<p>All other considerations about decommissioning apply when performing the process on multiple servers.</p>
<ul class="simple">
<li><p>Decommissioning is permanent.</p></li>
<li><p>Once you mark the pools as decommissioned, you <strong>cannot</strong> restore them.</p></li>
<li><p>Confirm you select the intended pools.</p></li>
</ul>
<section id="id1">
<h3>1) Review the MinIO Deployment Topology<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>The <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#command-mc.admin.decommission" title="mc.admin.decommission"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span></code></a> command returns a list of all pools in the MinIO deployment:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>┌─────┬────────────────────────────────────────────────────────────────┬──────────────────────────────────┬────────┐
│<span class="w"> </span>ID<span class="w">  </span>│<span class="w"> </span>Pools<span class="w">                                                          </span>│<span class="w"> </span>Capacity<span class="w">                         </span>│<span class="w"> </span>Status<span class="w"> </span>│
│<span class="w"> </span>1st<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">10</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">10</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
│<span class="w"> </span>2nd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">05</span>...08<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">95</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
│<span class="w"> </span>3rd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">09</span>...12<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">40</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">500</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
│<span class="w"> </span>4th<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">13</span>...16<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">0</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">500</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w"> </span>│
└─────┴────────────────────────────────────────────────────────────────┴──────────────────────────────────┴────────┘
</pre></div>
</div>
<p>The example deployment above has three pools.
Each pool has four servers with four drives each.</p>
<p>Identify the target pool for decommissioning and review the current capacity.
The remaining pools in the deployment <em>must</em> have sufficient total capacity to migrate all object stored in the decommissioned pool.</p>
<p>In the example above, the deployment has 1110TiB total storage with 145TiB used.</p>
<ul class="simple">
<li><p>The first pool (<code class="docutils literal notranslate"><span class="pre">minio-{01...04}</span></code>) is the first decommissioning target, as it was provisioned when the MinIO deployment was created and is completely full.</p></li>
<li><p>The second pool (<code class="docutils literal notranslate"><span class="pre">minio-{05...08}</span></code>) is the second decommissioning target, as it was also provisioned when the MinIO deployment was created and is nearly full.</p></li>
<li><p>The fourth pool (<code class="docutils literal notranslate"><span class="pre">minio-{13...16}</span></code>) is a newly added pool with new hardware from a completed server expansion.</p></li>
</ul>
<p>The third and fourth pools can absorb all objects stored on the first pool without significantly impacting total available storage.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Complete any server expansion to add new storage resources _before_ beginning a decommission process.</p>
</div>
</section>
<section id="id2">
<h3>2) Start the Decommissioning Process<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h3>
<div class="warning admonition">
<p class="admonition-title">Decommissioning is Permanent</p>
<p>Once MinIO begins decommissioning the pools, it marks those pools as <em>permanently</em> inactive (“draining”).
Cancelling or otherwise interrupting the decommissioning procedure does <strong>not</strong> restore the pools to an active state.</p>
<p>Review and validate that you are decommissioning the correct pools <em>before</em> running the following command.</p>
</div>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.start" title="mc.admin.decommission.start"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">start</span></code></a> command to begin decommissioning the target pool.
Specify the <a class="reference internal" href="../../reference/minio-mc/mc-alias-set.html#alias"><span class="std std-ref">alias</span></a> of the deployment and a comma-separated list of the full description of each pool to decommission, including all hosts, disks, and file paths.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>start<span class="w"> </span>myminio/<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.net:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio,https://minio-<span class="o">{</span><span class="m">05</span>...08<span class="o">}</span>.example.net:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio
</pre></div>
</div>
<p>The example command begins decommissioning the two listed matching server pools on the <code class="docutils literal notranslate"><span class="pre">myminio</span></code> deployment.</p>
<p>During the decommissioning process, MinIO continues routing read operations (<code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">LIST</span></code>, <code class="docutils literal notranslate"><span class="pre">HEAD</span></code>) operations to the pools for those objects not yet migrated.
MinIO routes all new write operations (<code class="docutils literal notranslate"><span class="pre">PUT</span></code>) to the remaining pools in the deployment not scheduled for decommissioning.</p>
<p>Draining of decommissioned pools happens one pool at a time, completing the decommission of each pool in sequence.
Draining does _not_ happen concurrently for all decommissioning pools.</p>
<p>Load balancers, reverse proxy, or other network control components which manage connections to the deployment do not need to modify their configurations at this time.</p>
</section>
<section id="id3">
<h3>3) Monitor the Decommissioning Process<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h3>
<p>Use the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.status" title="mc.admin.decommission.status"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">status</span></code></a> command to monitor the decommissioning process.</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>┌─────┬────────────────────────────────────────────────────────────────┬──────────────────────────────────┬──────────┐
│<span class="w"> </span>ID<span class="w">  </span>│<span class="w"> </span>Pools<span class="w">                                                          </span>│<span class="w"> </span>Capacity<span class="w">                         </span>│<span class="w"> </span>Status<span class="w">   </span>│
│<span class="w"> </span>1st<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">10</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">10</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Draining<span class="w"> </span>│
│<span class="w"> </span>2nd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">05</span>...08<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">95</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">100</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Pending<span class="w">  </span>│
│<span class="w"> </span>3rd<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">09</span>...12<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">40</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">500</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w">   </span>│
│<span class="w"> </span>4th<span class="w"> </span>│<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">13</span>...16<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio<span class="w"> </span>│<span class="w">  </span><span class="m">0</span><span class="w">  </span>TiB<span class="w"> </span><span class="o">(</span>used<span class="o">)</span><span class="w"> </span>/<span class="w"> </span><span class="m">500</span><span class="w"> </span>TiB<span class="w"> </span><span class="o">(</span>total<span class="o">)</span><span class="w"> </span>│<span class="w"> </span>Active<span class="w">   </span>│
└─────┴────────────────────────────────────────────────────────────────┴──────────────────────────────────┴──────────┘
</pre></div>
</div>
<p>You can retrieve more detailed information by specifying the description of the server pool to the command:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>mc<span class="w"> </span>admin<span class="w"> </span>decommission<span class="w"> </span>status<span class="w"> </span>myminio<span class="w"> </span>https://minio-<span class="o">{</span><span class="m">01</span>...04<span class="o">}</span>.example.com:9000/mnt/disk<span class="o">{</span><span class="m">1</span>...4<span class="o">}</span>/minio
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>Decommissioning<span class="w"> </span>rate<span class="w"> </span>at<span class="w"> </span>100MiB/sec<span class="w"> </span><span class="o">[</span>1TiB/10TiB<span class="o">]</span>
Started:<span class="w"> </span><span class="m">30</span><span class="w"> </span>minutes<span class="w"> </span>ago
</pre></div>
</div>
<p><a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.status" title="mc.admin.decommission.status"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">status</span></code></a> marks the <span class="guilabel">Status</span> as <span class="guilabel">Complete</span> once decommissioning is completed.
You can move on to the next step once MinIO completes decommissioning for all pools.</p>
<p>If <span class="guilabel">Status</span> reads as failed, you can re-run the <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-decommission.html#mc.admin.decommission.start" title="mc.admin.decommission.start"><code class="xref minio minio-mc-cmd docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">decommission</span> <span class="pre">start</span></code></a> command to resume the process.
For persistent failures, use <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-logs.html#command-mc.admin.logs" title="mc.admin.logs"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">logs</span></code></a> or review the <code class="docutils literal notranslate"><span class="pre">systemd</span></code> logs (e.g. <code class="docutils literal notranslate"><span class="pre">journalctl</span> <span class="pre">-u</span> <span class="pre">minio</span></code>) to identify more specific errors.</p>
</section>
<section id="remove-the-decommissioned-pools-from-the-deployment-configuration">
<h3>4) Remove the Decommissioned Pools from the Deployment Configuration<a class="headerlink" href="#remove-the-decommissioned-pools-from-the-deployment-configuration" title="Permalink to this heading"></a></h3>
<p>Once decommissioning completes, you can safely remove the pools from the deployment configuration.
Modify the startup command for each remaining MinIO server in the deployment and remove the decommissioned pool.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">.deb</span></code> or <code class="docutils literal notranslate"><span class="pre">.rpm</span></code> packages install a <a class="reference external" href="https://www.freedesktop.org/wiki/Software/systemd/">systemd</a> service file to <code class="docutils literal notranslate"><span class="pre">/lib/systemd/system/minio.service</span></code>.
For binary installations, this procedure assumes the file was created manually as per the <a class="reference internal" href="installation.html#deploy-minio-distributed"><span class="std std-ref">Installation and Management</span></a> procedure.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">minio.service</span></code> file uses an environment file located at <code class="docutils literal notranslate"><span class="pre">/etc/default/minio</span></code> for sourcing configuration settings, including the startup.
Specifically, the <code class="docutils literal notranslate"><span class="pre">MINIO_VOLUMES</span></code> variable sets the startup command:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>/etc/default/minio<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;MINIO_VOLUMES&quot;</span>
</pre></div>
</div>
<p>The command returns output similar to the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">MINIO_VOLUMES</span><span class="o">=</span><span class="s2">&quot;https://minio-{1...4}.example.net:9000/mnt/disk{1...4}/minio https://minio-{5...8}.example.net:9000/mnt/disk{1...4}/minio https://minio-{9...12}.example.net:9000/mnt/disk{1...4}/minio&quot;</span>
</pre></div>
</div>
<p>Edit the environment file and remove the decommissioned pools from the <code class="docutils literal notranslate"><span class="pre">MINIO_VOLUMES</span></code> value.</p>
</section>
<section id="id4">
<h3>5) Update Network Control Plane<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h3>
<p>Update any load balancers, reverse proxies, or other network control planes to remove the decommissioned server pools from the connection configuration for the MinIO deployment.</p>
<p>Specific instructions for configuring network control plane components is out of scope for this procedure.</p>
</section>
<section id="id5">
<h3>6) Restart the MinIO Deployment<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<p>Issue the following commands on each node <strong>simultaneously</strong> in the deployment to restart the MinIO service:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>minio.service
</pre></div>
</div>
<p>Use the following commands to confirm the service is online and functional:</p>
<div class="copyable highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>minio.service
journalctl<span class="w"> </span>-f<span class="w"> </span>-u<span class="w"> </span>minio.service
</pre></div>
</div>
<p>MinIO may log an increased number of non-critical warnings while the
server processes connect and synchronize. These warnings are typically
transient and should resolve as the deployment comes online.</p>
<p>MinIO strongly recommends restarting all MinIO Server processes in a deployment simultaneously.
MinIO operations are atomic and strictly consistent.
As such the restart procedure is non-disruptive to applications and ongoing operations.</p>
<p>Do <strong>not</strong> perform “rolling” (e.g. one node at a time) restarts.</p>
<p>Once the deployment is online, use <a class="reference internal" href="../../reference/minio-mc-admin/mc-admin-info.html#command-mc.admin.info" title="mc.admin.info"><code class="xref minio minio-mc docutils literal notranslate"><span class="pre">mc</span> <span class="pre">admin</span> <span class="pre">info</span></code></a> to confirm the uptime of all remaining servers in the deployment.</p>
</section>
</section>
</section>


            </div><div class="footer">
   This work is licensed under a
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License.</a>
   2020-Present, MinIO, Inc. 
   <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
      <img height="10" alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/80x15.png" />
   </a>
</div>
         </div>
      </div>
   </section><div id="cookie">
    <div class="container">
        <div class="cookie__text">
            <strong>Your privacy is important to us:</strong>
            We use cookies in order to give you a better experience. If you wish so, you can always review our 
            <a target="_blank" rel="noreferrer noopener" href="https://min.io/privacy-policy">Privacy Policy</a>.
        </div>

        <button type="button" id="cookie__btn">Accept</button>
    </div>
</div><script>
    // Dark mode and read mode detection

    // Dark mode
    /*var isDarkMode = localStorage.getItem("dark-mode");
    var dmToggleBtn = document.getElementById("dark-mode-toggle");
    if (isDarkMode === "true") {
       document.documentElement.classList.add("dark-mode");
       dmToggleBtn.classList.add("active");
    }

    // Read mode
    var isReadMode = localStorage.getItem("read-mode");
    var rmToggleBtn = document.getElementById("read-mode-toggle");

    if (isReadMode === "true") {
        document.documentElement.classList.add("read-mode");
        rmToggleBtn.classList.add("active");
    }*/
 </script>
  </body>
</html>